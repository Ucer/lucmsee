(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4f9a8fef"],{a5b7:function(e,t,a){},a796:function(e,t,a){"use strict";a.d(t,"b",function(){return s}),a.d(t,"a",function(){return i});var n=a("1f09"),o=a.n(n),r=a("66df"),s=function(e,t,a){return r["a"].request({url:"/api/admin/attachments",params:{page:e,per_page:t,search_data:o()(a)},method:"get"})},i=function(e){return r["a"].request({url:"/api/admin/attachments/"+e,method:"delete"})}},b96c:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Row",{attrs:{gutter:24}},[a("Col",{staticClass:"hidden-mobile",attrs:{xs:6,lg:6}},[a("Input",{attrs:{icon:"search",placeholder:"请输入文件名称..."},model:{value:e.searchForm.original_name,callback:function(t){e.$set(e.searchForm,"original_name",t)},expression:"searchForm.original_name"}})],1),a("Col",{attrs:{xs:5,lg:4}}),a("Col",{attrs:{xs:5,lg:4}},[a("Select",{attrs:{placeholder:"请选择附件归类"},model:{value:e.searchForm.category,callback:function(t){e.$set(e.searchForm,"category",t)},expression:"searchForm.category"}},[a("Option",{key:"",attrs:{value:""}},[e._v("全部")]),e._l(e.tableStatus.category,function(t,n){return a("Option",{key:n,attrs:{value:n}},[e._v(e._s(t))])})],2)],1),a("Col",{attrs:{xs:1,lg:2}},[a("Button",{attrs:{type:"primary",icon:"ios-search"},on:{click:function(t){return e.getTableDataExcute(e.feeds.current_page)}}},[e._v("Search")])],1)],1),a("br"),a("Row",[e.tableLoading?a("div",{staticClass:"demo-spin-container"},[a("Spin",{attrs:{fix:""}},[a("Icon",{staticClass:"spin-icon-load",attrs:{type:"load-c",size:"18"}}),a("div",[e._v("加载中...")])],1)],1):e._e(),a("Scroll",{attrs:{"on-reach-edge":e.handleReachEdge,height:690,"loading-text":e.scroll_text,"distance-to-edge":10}},[a("div",{staticClass:"galley-image-photo-list"},[a("ul",{ref:"galley-photo",staticClass:"pictures  row l-hide"},e._l(e.feeds.data,function(t,n){return a("li",[a("img",{attrs:{"data-original":t.domain+"/"+t.link_path+"/"+t.storage_name,src:t.domain+"/"+t.link_path+"/"+t.storage_name,alt:""}}),a("div",{staticClass:"photo-text"},[a("span",{staticClass:"photo-size"},[e._v(e._s(t.size))]),a("span",{staticClass:"photo-date"},[e._v(e._s(t.created_at.substring(0,10)))])]),a("span",{staticClass:"photo-name"},[e._v(e._s(t.original_name))])])}),0)]),e.feeds.data?e._e():a("div",[e._v("\n        暂无数据\n      ")])])],1)],1)},o=[],r=a("a59e"),s=a.n(r),i=(a("a5b7"),a("8386")),c=(a("a398"),a("2934")),l=a("a796"),d={data:function(){return{searchForm:{order_by:"id,desc",type:"",mime_type:"image",original_name:""},notRealySortKey:[],tableLoading:!1,tableStatus:{category:[]},feeds:{data:[],total:0,current_page:1,per_page:18,last_page:0},scroll_text:"拼命加载中..."}},mounted:function(){var e=this;e.getTableStatusExcute("attachments/category"),e.getTableDataExcute(e.feeds.current_page)},methods:{handleOnPageChange:function(e){this.getTableDataExcute(e)},onPageSizeChange:function(e){this.feeds.per_page=e,this.getTableDataExcute(this.feeds.current_page)},getTableStatusExcute:function(e){var t=this;Object(c["c"])(e).then(function(e){var a=e.data;t.tableStatus.category=a})},getTableDataExcute:function(e){var t=this,a=this;a.tableLoading=!0,a.feeds.current_page=e,Object(l["b"])(e,a.feeds.per_page,a.searchForm).then(function(e){a.feeds.data=e.data,a.feeds.total=e.meta.total,a.feeds.last_page=e.meta.last_page,a.tableLoading=!1,t.ViewImage()},function(e){a.tableLoading=!1})},onSortChange:function(e){var t=e.column.key+","+e.order;oneOf(e.column.key,this.notRealySortKey)||(this.searchForm.order_by=t,this.getTableDataExcute(this.feeds.current_page))},handleReachEdge:function(e){var t=this;return this.scroll_text="拼命加载中...",new s.a(function(a){var n=t.feeds.current_page;if(e>0){if(n=t.feeds.current_page-1,n<1)return t.scroll_text="已经是第一页了",void a()}else if(n=t.feeds.current_page+1,n>t.feeds.last_page)return t.scroll_text="已经是最后一页了",void a();t.getTableDataExcute(n),a()})},ViewImage:function(){this.$nextTick(function(){$(function(){$(".l-hide").click(function(){$(".l-show").removeAttr("id").addClass("l-hide").removeClass("l-show"),$(this).attr("id","galley-photo"),$(this).addClass("l-show"),$(this).removeClass("l-hide");var e=document.getElementById("galley-photo"),t=new i["a"](e,{url:"data-original",toolbar:{oneToOne:!0,prev:function(){t.prev(!0)},play:!0,next:function(){t.next(!0)},update:function(){},download:function(){var e=document.createElement("a");e.href=t.image.src,e.download=t.image.alt,document.body.appendChild(e),e.click(),document.body.removeChild(e)}}})})})})}}},u=d,g=a("17cc"),h=Object(g["a"])(u,n,o,!1,null,null,null);t["default"]=h.exports}}]);