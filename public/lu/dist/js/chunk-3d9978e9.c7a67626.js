(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3d9978e9"],{"0808":function(t,e,i){},2934:function(t,e,i){"use strict";i.d(e,"a",function(){return n}),i.d(e,"b",function(){return o}),i.d(e,"c",function(){return s});var a=i("66df"),n=function(t){return a["a"].request({url:"api/get_captcha",method:"get"})},o=function(t){return a["a"].request({url:"/api/common_get_table_status/"+t,method:"get"})},s=function(t,e,i){return a["a"].request({url:"/api/common_switch_enable",data:{id:t,table:e,value:i},method:"post"})}},"6a8f":function(t,e,i){"use strict";var a=i("8b21"),n=i.n(a);n.a},"8b21":function(t,e,i){},"8f8b":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("Row",{attrs:{gutter:24}},[i("Col",{attrs:{xs:7,lg:11}},[i("Button",{attrs:{type:"success",icon:"plus"},on:{click:function(e){return t.addBtn()}}},[t._v(t._s(t.$t("add")))])],1),i("Col",{attrs:{xs:3,lg:3}},[i("Select",{attrs:{placeholder:"请选择状态"},model:{value:t.searchForm.enable,callback:function(e){t.$set(t.searchForm,"enable",e)},expression:"searchForm.enable"}},[i("Option",{key:"",attrs:{value:""}},[t._v("全部")]),t._l(t.tableStatus.enable,function(e,a){return i("Option",{key:a,attrs:{value:a}},[t._v(t._s(e))])})],2)],1),i("Col",{attrs:{xs:3,lg:3}},[i("Select",{attrs:{placeholder:"管理员"},model:{value:t.searchForm.is_admin,callback:function(e){t.$set(t.searchForm,"is_admin",e)},expression:"searchForm.is_admin"}},[i("Option",{key:"",attrs:{value:""}},[t._v("全部")]),t._l(t.tableStatus.is_admin,function(e,a){return i("Option",{key:a,attrs:{value:a}},[t._v(t._s(e))])})],2)],1),i("Col",{staticClass:"hidden-mobile",attrs:{xs:6,lg:3}},[i("Input",{attrs:{icon:"search",placeholder:"请输入邮箱搜索..."},model:{value:t.searchForm.email,callback:function(e){t.$set(t.searchForm,"email",e)},expression:"searchForm.email"}})],1),i("Col",{attrs:{xs:3,lg:3}},[i("Button",{attrs:{type:"primary",icon:"ios-search"},on:{click:function(e){return t.getTableDataExcute(t.feeds.current_page)}}},[t._v(t._s(t.$t("search")))])],1)],1),i("br"),i("Row",[t.tableLoading?i("div",{staticClass:"demo-spin-container"},[i("Spin",{attrs:{fix:""}},[i("Icon",{staticClass:"spin-icon-load",attrs:{type:"load-c",size:"18"}}),i("div",[t._v(t._s(t.$t("table_loading")))])],1)],1):t._e(),i("Table",{attrs:{border:"",columns:t.columns,data:t.feeds.data},on:{"on-sort-change":t.onSortChange},scopedSlots:t._u([{key:"avatar",fn:function(e){var a=e.row;e.index;return[i("div",{staticClass:"text-center"},[a.avatar?i("img",{staticClass:"fancybox",staticStyle:{width:"40px",height:"40px"},attrs:{src:a.avatar,href:a.avatar,tatle:"头像",alt:"头像"}}):i("span",[t._v("--")])])]}},{key:"is_admin",fn:function(e){var a=e.row;e.index;return["T"===a.is_admin?i("Tag",{attrs:{color:"green"}},[t._v("可登录")]):i("Tag",{attrs:{color:"red"}},[t._v("不可登录")])]}},{key:"enable",fn:function(e){var a=e.row,n=e.index;return[i("iSwitch",{attrs:{slot:"open",type:"primary",value:"T"===a.enable},on:{"on-change":function(e){return t.switchChange(a,n)}},slot:"open"})]}},{key:"action",fn:function(e){var a=e.row,n=e.index;return[i("Button",{staticStyle:{"margin-right":"5px"},attrs:{type:"success",size:"small"},on:{click:function(e){return t.tableButtonEdit(a,n)}}},[t._v(t._s(t.$t("edit")))]),i("Button",{staticStyle:{"margin-right":"5px"},attrs:{type:"info",size:"small"},on:{click:function(e){return t.tableButtonGiveUserRoles(a,n)}}},[t._v(t._s(t.$t("permission")))]),i("Poptip",{attrs:{confirm:"",title:"您确定要删除ID为："+a.id+" 的记录？"},on:{"on-ok":function(e){return t.tableButtonDestroyOk(a,n)}}},[i("Button",{staticStyle:{"margin-right":"5px"},attrs:{type:"error",size:"small"}},[t._v(t._s(t.$t("destroy")))])],1)]}}])}),i("div",{staticStyle:{margin:"10px",overflow:"hidden"}},[i("div",{staticStyle:{float:"right"}},[i("Page",{staticClass:"paging",attrs:{total:t.feeds.total,current:t.feeds.current_page,"page-size":t.feeds.per_page,"show-elevator":"","show-total":"","show-sizer":""},on:{"on-change":t.handleOnPageChange,"on-page-size-change":t.onPageSizeChange}})],1)])],1),i("Modal",{attrs:{closable:!1,"mask-closable":!1,width:"800"},model:{value:t.roleModal.show,callback:function(e){t.$set(t.roleModal,"show",e)},expression:"roleModal.show"}},[i("h3",{staticStyle:{color:"#2D8CF0"},attrs:{slot:"header"},slot:"header"},[t._v("分配权限")]),t.roleModal.show?i("Transfer",{attrs:{data:t.roleModal.allRoles,"target-keys":t.roleModal.hasRoles,"render-format":t.renderFormat,operations:["移除角色","添加角色"],"list-style":t.roleModal.listStyle,filterable:""},on:{"on-change":t.handleTransferChange}}):t._e(),i("div",{attrs:{slot:"footer"},slot:"footer"},[i("Button",{attrs:{type:"text"},on:{click:t.cancelRoleModal}},[t._v("取消")]),i("Button",{attrs:{type:"primary"},on:{click:t.giveUserRoleExcute}},[t._v("保存 ")])],1)],1),t.addModal.show?i("add-component",{on:{"on-add-modal-success":function(e){return t.getTableDataExcute(t.feeds.current_page)},"on-add-modal-hide":t.addModalHide}}):t._e()],1)},n=[],o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("Modal",{attrs:{closable:!1,"mask-closable":!1,width:"600"},model:{value:t.modalShow,callback:function(e){t.modalShow=e},expression:"modalShow"}},[i("p",{attrs:{slot:"header"},slot:"header"},[t._v(t._s(t.$t("add")))]),i("Form",{ref:"formData",attrs:{model:t.formData,rules:t.rules,"label-position":"left","label-width":100}},[i("FormItem",{attrs:{label:"头像："}},[i("upload",{attrs:{"upload-config":t.imguploadConfig},on:{"on-upload-change":t.uploadChange},model:{value:t.formData.avatar,callback:function(e){t.$set(t.formData,"avatar",e)},expression:"formData.avatar"}})],1),i("FormItem",{attrs:{label:"昵称：",prop:"name"}},[i("Input",{model:{value:t.formData.name,callback:function(e){t.$set(t.formData,"name",e)},expression:"formData.name"}})],1),i("FormItem",{attrs:{label:"邮箱："}},[i("Input",{model:{value:t.formData.email,callback:function(e){t.$set(t.formData,"email",e)},expression:"formData.email"}})],1),i("FormItem",{attrs:{label:"登录密码：",prop:"password"}},[i("Input",{attrs:{type:"password"},model:{value:t.formData.password,callback:function(e){t.$set(t.formData,"password",e)},expression:"formData.password"}})],1),i("FormItem",{attrs:{label:"登录密码确认：",prop:"password_confirmation"}},[i("Input",{attrs:{type:"password"},model:{value:t.formData.password_confirmation,callback:function(e){t.$set(t.formData,"password_confirmation",e)},expression:"formData.password_confirmation"}})],1),i("FormItem",{attrs:{label:"可登录后台："}},[i("RadioGroup",{model:{value:t.formData.is_admin,callback:function(e){t.$set(t.formData,"is_admin",e)},expression:"formData.is_admin"}},[i("Radio",{attrs:{label:"F"}},[t._v("否")]),i("Radio",{attrs:{label:"T"}},[t._v("是")])],1)],1)],1),i("div",{attrs:{slot:"footer"},slot:"footer"},[i("Button",{attrs:{type:"text"},on:{click:t.cancel}},[t._v(t._s(t.$t("cancel")))]),i("Button",{attrs:{type:"primary",loading:t.saveLoading},on:{click:t.addExcute}},[t._v(t._s(t.$t("save"))+" ")])],1)],1)],1)},s=[],r=i("c24f"),l=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[t._l(t.uploadList,function(e){return i("div",{staticClass:"demo-upload-list"},["finished"===e.status?[i("img",{attrs:{src:e.url}}),i("div",{staticClass:"demo-upload-list-cover"},[i("Icon",{attrs:{type:"ios-trash-outline"},nativeOn:{click:function(i){return t.handleRemove(e)}}})],1)]:[e.showProgress?i("Progress",{attrs:{percent:e.percentage,"hide-info":""}}):t._e()]],2)}),i("Upload",{ref:"upload",staticStyle:{display:"inline-block",width:"58px"},attrs:{data:t.uploadConfig.data,"show-upload-list":!1,"default-file-list":t.uploadConfig.default_list,"on-success":t.handleSuccess,headers:t.uploadConfig.headers,format:t.uploadConfig.format,"max-size":t.uploadConfig.max_size,"on-format-error":t.handleFormatError,"on-exceeded-size":t.handleMaxSize,"before-upload":t.handleBeforeUpload,multiple:t.uploadConfig.multiple,name:t.uploadConfig.file_name,type:"drag",action:t.uploadConfig.upload_url}},[i("div",{staticStyle:{width:"58px",height:"58px","line-height":"58px"}},[i("Icon",{attrs:{type:"ios-camera",size:"20"}})],1)]),i("Divider",{attrs:{orientation:"left"}},[t._v("点击预览图片")]),i("div",{staticClass:"galley-image-list"},[i("ul",{ref:"galley",staticClass:"pictures  row l-hide"},t._l(t.formatFileList,function(t,e){return i("li",[i("img",{attrs:{"data-original":t.url,src:t.url,alt:""}})])}),0)])],2)},h=[],c=(i("7f7f"),i("ac6a"),i("2934"));
/*!
 * Viewer.js v1.3.2
 * https://fengyuanchen.github.io/viewerjs
 *
 * Copyright 2015-present Chen Fengyuan
 * Released under the MIT license
 *
 * Date: 2019-01-24T11:01:33.473Z
 */
function d(t){return d="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},d(t)}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function m(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function f(t,e,i){return e&&m(t.prototype,e),i&&m(t,i),t}var g={backdrop:!0,button:!0,navbar:!0,title:!0,toolbar:!0,className:"",container:"body",filter:null,fullscreen:!0,initialViewIndex:0,inline:!1,interval:5e3,keyboard:!0,loading:!0,loop:!0,minWidth:200,minHeight:100,movable:!0,zoomable:!0,rotatable:!0,scalable:!0,toggleOnDblclick:!0,tooltip:!0,transition:!0,zIndex:2015,zIndexInline:0,zoomRatio:.1,minZoomRatio:.01,maxZoomRatio:100,url:"src",ready:null,show:null,shown:null,hide:null,hidden:null,view:null,viewed:null,zoom:null,zoomed:null},p='<div class="viewer-container" touch-action="none"><div class="viewer-canvas"></div><div class="viewer-footer"><div class="viewer-title"></div><div class="viewer-toolbar"></div><div class="viewer-navbar"><ul class="viewer-list"></ul></div></div><div class="viewer-tooltip"></div><div role="button" class="viewer-button" data-viewer-action="mix"></div><div class="viewer-player"></div></div>',v="undefined"!==typeof window,w=v?window:{},b=!!v&&"ontouchstart"in w.document.documentElement,y=!!v&&"PointerEvent"in w,x="viewer",_="move",k="switch",D="zoom",C="".concat(x,"-active"),I="".concat(x,"-close"),S="".concat(x,"-fade"),z="".concat(x,"-fixed"),E="".concat(x,"-fullscreen"),T="".concat(x,"-fullscreen-exit"),L="".concat(x,"-hide"),F="".concat(x,"-hide-md-down"),M="".concat(x,"-hide-sm-down"),R="".concat(x,"-hide-xs-down"),O="".concat(x,"-in"),N="".concat(x,"-invisible"),q="".concat(x,"-loading"),B="".concat(x,"-move"),j="".concat(x,"-open"),W="".concat(x,"-show"),Y="".concat(x,"-transition"),X="click",A="dblclick",P="dragstart",U="hidden",H="hide",V="keydown",K="load",Z=b?"touchstart":"mousedown",G=b?"touchmove":"mousemove",J=b?"touchend touchcancel":"mouseup",Q=y?"pointerdown":Z,tt=y?"pointermove":G,et=y?"pointerup pointercancel":J,it="ready",at="resize",nt="show",ot="shown",st="transitionend",rt="view",lt="viewed",ht="wheel",ct="zoom",dt="zoomed",ut="".concat(x,"Action"),mt=/\s\s*/,ft=["zoom-in","zoom-out","one-to-one","reset","prev","play","next","rotate-left","rotate-right","flip-horizontal","flip-vertical"];function gt(t){return"string"===typeof t}var pt=Number.isNaN||w.isNaN;function vt(t){return"number"===typeof t&&!pt(t)}function wt(t){return"undefined"===typeof t}function bt(t){return"object"===d(t)&&null!==t}var yt=Object.prototype.hasOwnProperty;function xt(t){if(!bt(t))return!1;try{var e=t.constructor,i=e.prototype;return e&&i&&yt.call(i,"isPrototypeOf")}catch(a){return!1}}function _t(t){return"function"===typeof t}function kt(t,e){if(t&&_t(e))if(Array.isArray(t)||vt(t.length)){var i,a=t.length;for(i=0;i<a;i+=1)if(!1===e.call(t,t[i],i,t))break}else bt(t)&&Object.keys(t).forEach(function(i){e.call(t,t[i],i,t)});return t}var Dt=Object.assign||function(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),a=1;a<e;a++)i[a-1]=arguments[a];return bt(t)&&i.length>0&&i.forEach(function(e){bt(e)&&Object.keys(e).forEach(function(i){t[i]=e[i]})}),t},Ct=/^(?:width|height|left|top|marginLeft|marginTop)$/;function It(t,e){var i=t.style;kt(e,function(t,e){Ct.test(e)&&vt(t)&&(t+="px"),i[e]=t})}function St(t,e){return t.classList?t.classList.contains(e):t.className.indexOf(e)>-1}function zt(t,e){if(e)if(vt(t.length))kt(t,function(t){zt(t,e)});else if(t.classList)t.classList.add(e);else{var i=t.className.trim();i?i.indexOf(e)<0&&(t.className="".concat(i," ").concat(e)):t.className=e}}function Et(t,e){e&&(vt(t.length)?kt(t,function(t){Et(t,e)}):t.classList?t.classList.remove(e):t.className.indexOf(e)>=0&&(t.className=t.className.replace(e,"")))}function Tt(t,e,i){e&&(vt(t.length)?kt(t,function(t){Tt(t,e,i)}):i?zt(t,e):Et(t,e))}var Lt=/([a-z\d])([A-Z])/g;function Ft(t){return t.replace(Lt,"$1-$2").toLowerCase()}function Mt(t,e){return bt(t[e])?t[e]:t.dataset?t.dataset[e]:t.getAttribute("data-".concat(Ft(e)))}function $t(t,e,i){bt(i)?t[e]=i:t.dataset?t.dataset[e]=i:t.setAttribute("data-".concat(Ft(e)),i)}var Rt=function(){var t=!1;if(v){var e=!1,i=function(){},a=Object.defineProperty({},"once",{get:function(){return t=!0,e},set:function(t){e=t}});w.addEventListener("test",i,a),w.removeEventListener("test",i,a)}return t}();function Ot(t,e,i){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=i;e.trim().split(mt).forEach(function(e){if(!Rt){var o=t.listeners;o&&o[e]&&o[e][i]&&(n=o[e][i],delete o[e][i],0===Object.keys(o[e]).length&&delete o[e],0===Object.keys(o).length&&delete t.listeners)}t.removeEventListener(e,n,a)})}function Nt(t,e,i){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=i;e.trim().split(mt).forEach(function(e){if(a.once&&!Rt){var o=t.listeners,s=void 0===o?{}:o;n=function(){delete s[e][i],t.removeEventListener(e,n,a);for(var o=arguments.length,r=new Array(o),l=0;l<o;l++)r[l]=arguments[l];i.apply(t,r)},s[e]||(s[e]={}),s[e][i]&&t.removeEventListener(e,s[e][i],a),s[e][i]=n,t.listeners=s}t.addEventListener(e,n,a)})}function qt(t,e,i){var a;return _t(Event)&&_t(CustomEvent)?a=new CustomEvent(e,{detail:i,bubbles:!0,cancelable:!0}):(a=document.createEvent("CustomEvent"),a.initCustomEvent(e,!0,!0,i)),t.dispatchEvent(a)}function Bt(t){var e=t.getBoundingClientRect();return{left:e.left+(window.pageXOffset-document.documentElement.clientLeft),top:e.top+(window.pageYOffset-document.documentElement.clientTop)}}function jt(t){var e=t.rotate,i=t.scaleX,a=t.scaleY,n=t.translateX,o=t.translateY,s=[];vt(n)&&0!==n&&s.push("translateX(".concat(n,"px)")),vt(o)&&0!==o&&s.push("translateY(".concat(o,"px)")),vt(e)&&0!==e&&s.push("rotate(".concat(e,"deg)")),vt(i)&&1!==i&&s.push("scaleX(".concat(i,")")),vt(a)&&1!==a&&s.push("scaleY(".concat(a,")"));var r=s.length?s.join(" "):"none";return{WebkitTransform:r,msTransform:r,transform:r}}function Wt(t){return gt(t)?t.replace(/^.*\//,"").replace(/[?&#].*$/,""):""}var Yt=w.navigator&&/(Macintosh|iPhone|iPod|iPad).*AppleWebKit/i.test(w.navigator.userAgent);function Xt(t,e){var i=document.createElement("img");if(t.naturalWidth&&!Yt)return e(t.naturalWidth,t.naturalHeight),i;var a=document.body||document.documentElement;return i.onload=function(){e(i.width,i.height),Yt||a.removeChild(i)},i.src=t.src,Yt||(i.style.cssText="left:0;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;opacity:0;position:absolute;top:0;z-index:-1;",a.appendChild(i)),i}function At(t){switch(t){case 2:return R;case 3:return M;case 4:return F;default:return""}}function Pt(t){var e=Dt({},t),i=[];return kt(t,function(t,a){delete e[a],kt(e,function(e){var a=Math.abs(t.startX-e.startX),n=Math.abs(t.startY-e.startY),o=Math.abs(t.endX-e.endX),s=Math.abs(t.endY-e.endY),r=Math.sqrt(a*a+n*n),l=Math.sqrt(o*o+s*s),h=(l-r)/r;i.push(h)})}),i.sort(function(t,e){return Math.abs(t)<Math.abs(e)}),i[0]}function Ut(t,e){var i=t.pageX,a=t.pageY,n={endX:i,endY:a};return e?n:Dt({timeStamp:Date.now(),startX:i,startY:a},n)}function Ht(t){var e=0,i=0,a=0;return kt(t,function(t){var n=t.startX,o=t.startY;e+=n,i+=o,a+=1}),e/=a,i/=a,{pageX:e,pageY:i}}var Vt={render:function(){this.initContainer(),this.initViewer(),this.initList(),this.renderViewer()},initContainer:function(){this.containerData={width:window.innerWidth,height:window.innerHeight}},initViewer:function(){var t,e=this.options,i=this.parent;e.inline&&(t={width:Math.max(i.offsetWidth,e.minWidth),height:Math.max(i.offsetHeight,e.minHeight)},this.parentData=t),!this.fulled&&t||(t=this.containerData),this.viewerData=Dt({},t)},renderViewer:function(){this.options.inline&&!this.fulled&&It(this.viewer,this.viewerData)},initList:function(){var t=this,e=this.element,i=this.options,a=this.list,n=[];kt(this.images,function(e,a){var o=e.src,s=e.alt||Wt(o),r=i.url;gt(r)?r=e.getAttribute(r):_t(r)&&(r=r.call(t,e)),(o||r)&&n.push("<li><img"+' src="'.concat(o||r,'"')+' role="button" data-viewer-action="view"'+' data-index="'.concat(a,'"')+' data-original-url="'.concat(r||o,'"')+' alt="'.concat(s,'"')+"></li>")}),a.innerHTML=n.join(""),this.items=a.getElementsByTagName("li"),kt(this.items,function(e){var a=e.firstElementChild;$t(a,"filled",!0),i.loading&&zt(e,q),Nt(a,K,function(a){i.loading&&Et(e,q),t.loadImage(a)},{once:!0})}),i.transition&&Nt(e,lt,function(){zt(a,Y)},{once:!0})},renderList:function(t){var e=t||this.index,i=this.items[e].offsetWidth||30,a=i+1;It(this.list,Dt({width:a*this.length},jt({translateX:(this.viewerData.width-i)/2-a*e})))},resetList:function(){var t=this.list;t.innerHTML="",Et(t,Y),It(t,jt({translateX:0}))},initImage:function(t){var e,i=this,a=this.options,n=this.image,o=this.viewerData,s=this.footer.offsetHeight,r=o.width,l=Math.max(o.height-s,s),h=this.imageData||{};this.imageInitializing={abort:function(){e.onload=null}},e=Xt(n,function(e,n){var o=e/n,s=r,c=l;i.imageInitializing=!1,l*o>r?c=r/o:s=l*o,s=Math.min(.9*s,e),c=Math.min(.9*c,n);var d={naturalWidth:e,naturalHeight:n,aspectRatio:o,ratio:s/e,width:s,height:c,left:(r-s)/2,top:(l-c)/2},u=Dt({},d);a.rotatable&&(d.rotate=h.rotate||0,u.rotate=0),a.scalable&&(d.scaleX=h.scaleX||1,d.scaleY=h.scaleY||1,u.scaleX=1,u.scaleY=1),i.imageData=d,i.initialImageData=u,t&&t()})},renderImage:function(t){var e=this,i=this.image,a=this.imageData;if(It(i,Dt({width:a.width,height:a.height,marginLeft:a.left,marginTop:a.top},jt(a))),t)if((this.viewing||this.zooming)&&this.options.transition){var n=function(){e.imageRendering=!1,t()};this.imageRendering={abort:function(){Ot(i,st,n)}},Nt(i,st,n,{once:!0})}else t()},resetImage:function(){if(this.viewing||this.viewed){var t=this.image;this.viewing&&this.viewing.abort(),t.parentNode.removeChild(t),this.image=null}}},Kt={bind:function(){var t=this.options,e=this.viewer,i=this.canvas,a=this.element.ownerDocument;Nt(e,X,this.onClick=this.click.bind(this)),Nt(e,ht,this.onWheel=this.wheel.bind(this),{passive:!1,capture:!0}),Nt(e,P,this.onDragStart=this.dragstart.bind(this)),Nt(i,Q,this.onPointerDown=this.pointerdown.bind(this)),Nt(a,tt,this.onPointerMove=this.pointermove.bind(this)),Nt(a,et,this.onPointerUp=this.pointerup.bind(this)),Nt(a,V,this.onKeyDown=this.keydown.bind(this)),Nt(window,at,this.onResize=this.resize.bind(this)),t.toggleOnDblclick&&Nt(i,A,this.onDblclick=this.dblclick.bind(this))},unbind:function(){var t=this.options,e=this.viewer,i=this.canvas,a=this.element.ownerDocument;Ot(e,X,this.onClick),Ot(e,ht,this.onWheel,{passive:!1,capture:!0}),Ot(e,P,this.onDragStart),Ot(i,Q,this.onPointerDown),Ot(a,tt,this.onPointerMove),Ot(a,et,this.onPointerUp),Ot(a,V,this.onKeyDown),Ot(window,at,this.onResize),t.toggleOnDblclick&&Ot(i,A,this.onDblclick)}},Zt={click:function(t){var e=t.target,i=this.options,a=this.imageData,n=Mt(e,ut);switch(b&&t.isTrusted&&e===this.canvas&&clearTimeout(this.clickCanvasTimeout),n){case"mix":this.played?this.stop():i.inline?this.fulled?this.exit():this.full():this.hide();break;case"hide":this.hide();break;case"view":this.view(Mt(e,"index"));break;case"zoom-in":this.zoom(.1,!0);break;case"zoom-out":this.zoom(-.1,!0);break;case"one-to-one":this.toggle();break;case"reset":this.reset();break;case"prev":this.prev(i.loop);break;case"play":this.play(i.fullscreen);break;case"next":this.next(i.loop);break;case"rotate-left":this.rotate(-90);break;case"rotate-right":this.rotate(90);break;case"flip-horizontal":this.scaleX(-a.scaleX||-1);break;case"flip-vertical":this.scaleY(-a.scaleY||-1);break;default:this.played&&this.stop()}},dblclick:function(t){t.preventDefault(),this.viewed&&t.target===this.image&&(b&&t.isTrusted&&clearTimeout(this.doubleClickImageTimeout),this.toggle())},load:function(){var t=this;this.timeout&&(clearTimeout(this.timeout),this.timeout=!1);var e=this.element,i=this.options,a=this.image,n=this.index,o=this.viewerData;Et(a,N),i.loading&&Et(this.canvas,q),a.style.cssText="height:0;"+"margin-left:".concat(o.width/2,"px;")+"margin-top:".concat(o.height/2,"px;")+"max-width:none!important;position:absolute;width:0;",this.initImage(function(){Tt(a,B,i.movable),Tt(a,Y,i.transition),t.renderImage(function(){t.viewed=!0,t.viewing=!1,_t(i.viewed)&&Nt(e,lt,i.viewed,{once:!0}),qt(e,lt,{originalImage:t.images[n],index:n,image:a})})})},loadImage:function(t){var e=t.target,i=e.parentNode,a=i.offsetWidth||30,n=i.offsetHeight||50,o=!!Mt(e,"filled");Xt(e,function(t,i){var s=t/i,r=a,l=n;n*s>a?o?r=n*s:l=a/s:o?l=a/s:r=n*s,It(e,Dt({width:r,height:l},jt({translateX:(a-r)/2,translateY:(n-l)/2})))})},keydown:function(t){var e=this.options;if(this.fulled&&e.keyboard)switch(t.keyCode||t.which||t.charCode){case 27:this.played?this.stop():e.inline?this.fulled&&this.exit():this.hide();break;case 32:this.played&&this.stop();break;case 37:this.prev(e.loop);break;case 38:t.preventDefault(),this.zoom(e.zoomRatio,!0);break;case 39:this.next(e.loop);break;case 40:t.preventDefault(),this.zoom(-e.zoomRatio,!0);break;case 48:case 49:t.ctrlKey&&(t.preventDefault(),this.toggle());break;default:}},dragstart:function(t){"img"===t.target.tagName.toLowerCase()&&t.preventDefault()},pointerdown:function(t){var e=this.options,i=this.pointers,a=t.buttons,n=t.button;if(!(!this.viewed||this.showing||this.viewing||this.hiding||vt(a)&&1!==a||vt(n)&&0!==n||t.ctrlKey)){t.preventDefault(),t.changedTouches?kt(t.changedTouches,function(t){i[t.identifier]=Ut(t)}):i[t.pointerId||0]=Ut(t);var o=!!e.movable&&_;Object.keys(i).length>1?o=D:"touch"!==t.pointerType&&"touchstart"!==t.type||!this.isSwitchable()||(o=k),!e.transition||o!==_&&o!==D||Et(this.image,Y),this.action=o}},pointermove:function(t){var e=this.pointers,i=this.action;this.viewed&&i&&(t.preventDefault(),t.changedTouches?kt(t.changedTouches,function(t){Dt(e[t.identifier]||{},Ut(t,!0))}):Dt(e[t.pointerId||0]||{},Ut(t,!0)),this.change(t))},pointerup:function(t){var e,i=this,a=this.options,n=this.action,o=this.pointers;t.changedTouches?kt(t.changedTouches,function(t){e=o[t.identifier],delete o[t.identifier]}):(e=o[t.pointerId||0],delete o[t.pointerId||0]),n&&(t.preventDefault(),!a.transition||n!==_&&n!==D||zt(this.image,Y),this.action=!1,b&&n!==D&&e&&Date.now()-e.timeStamp<500&&(clearTimeout(this.clickCanvasTimeout),clearTimeout(this.doubleClickImageTimeout),a.toggleOnDblclick&&this.viewed&&t.target===this.image?this.imageClicked?(this.imageClicked=!1,this.doubleClickImageTimeout=setTimeout(function(){qt(i.image,A)},50)):(this.imageClicked=!0,this.doubleClickImageTimeout=setTimeout(function(){i.imageClicked=!1},500)):(this.imageClicked=!1,a.backdrop&&"static"!==a.backdrop&&t.target===this.canvas&&(this.clickCanvasTimeout=setTimeout(function(){qt(i.canvas,X)},50)))))},resize:function(){var t=this;if(this.isShown&&!this.hiding&&(this.initContainer(),this.initViewer(),this.renderViewer(),this.renderList(),this.viewed&&this.initImage(function(){t.renderImage()}),this.played)){if(this.options.fullscreen&&this.fulled&&!(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement))return void this.stop();kt(this.player.getElementsByTagName("img"),function(e){Nt(e,K,t.loadImage.bind(t),{once:!0}),qt(e,K)})}},wheel:function(t){var e=this;if(this.viewed&&(t.preventDefault(),!this.wheeling)){this.wheeling=!0,setTimeout(function(){e.wheeling=!1},50);var i=Number(this.options.zoomRatio)||.1,a=1;t.deltaY?a=t.deltaY>0?1:-1:t.wheelDelta?a=-t.wheelDelta/120:t.detail&&(a=t.detail>0?1:-1),this.zoom(-a*i,!0,t)}}},Gt={show:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this.element,i=this.options;if(i.inline||this.showing||this.isShown||this.showing)return this;if(!this.ready)return this.build(),this.ready&&this.show(t),this;if(_t(i.show)&&Nt(e,nt,i.show,{once:!0}),!1===qt(e,nt)||!this.ready)return this;this.hiding&&this.transitioning.abort(),this.showing=!0,this.open();var a=this.viewer;if(Et(a,L),i.transition&&!t){var n=this.shown.bind(this);this.transitioning={abort:function(){Ot(a,st,n),Et(a,O)}},zt(a,Y),a.offsetWidth,Nt(a,st,n,{once:!0}),zt(a,O)}else zt(a,O),this.shown();return this},hide:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this.element,i=this.options;if(i.inline||this.hiding||!this.isShown&&!this.showing)return this;if(_t(i.hide)&&Nt(e,H,i.hide,{once:!0}),!1===qt(e,H))return this;this.showing&&this.transitioning.abort(),this.hiding=!0,this.played?this.stop():this.viewing&&this.viewing.abort();var a=this.viewer;if(i.transition&&!t){var n=this.hidden.bind(this),o=function(){Nt(a,st,n,{once:!0}),Et(a,O)};this.transitioning={abort:function(){this.viewed?Ot(this.image,st,o):Ot(a,st,n)}},this.viewed?(Nt(this.image,st,o,{once:!0}),this.zoomTo(0,!1,!1,!0)):o()}else Et(a,O),this.hidden();return this},view:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.options.initialViewIndex;if(e=Number(e)||0,!this.isShown)return this.index=e,this.show();if(this.hiding||this.played||e<0||e>=this.length||this.viewed&&e===this.index)return this;this.viewing&&this.viewing.abort();var i=this.element,a=this.options,n=this.title,o=this.canvas,s=this.items[e],r=s.querySelector("img"),l=Mt(r,"originalUrl"),h=r.getAttribute("alt"),c=document.createElement("img");if(c.src=l,c.alt=h,_t(a.view)&&Nt(i,rt,a.view,{once:!0}),!1===qt(i,rt,{originalImage:this.images[e],index:e,image:c})||!this.isShown||this.hiding||this.played)return this;this.image=c,Et(this.items[this.index],C),zt(s,C),this.viewed=!1,this.index=e,this.imageData={},zt(c,N),a.loading&&zt(o,q),o.innerHTML="",o.appendChild(c),this.renderList(),n.innerHTML="";var d,u=function(){var e=t.imageData,i=Array.isArray(a.title)?a.title[1]:a.title;n.innerHTML=_t(i)?i.call(t,c,e):"".concat(h," (").concat(e.naturalWidth," × ").concat(e.naturalHeight,")")};return Nt(i,lt,u,{once:!0}),this.viewing={abort:function(){Ot(i,lt,u),c.complete?this.imageRendering?this.imageRendering.abort():this.imageInitializing&&this.imageInitializing.abort():(Ot(c,K,d),this.timeout&&clearTimeout(this.timeout))}},c.complete?this.load():(Nt(c,K,d=this.load.bind(this),{once:!0}),this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout(function(){Et(c,N),t.timeout=!1},1e3)),this},prev:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this.index-1;return e<0&&(e=t?this.length-1:0),this.view(e),this},next:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this.length-1,i=this.index+1;return i>e&&(i=t?0:e),this.view(i),this},move:function(t,e){var i=this.imageData;return this.moveTo(wt(t)?t:i.left+Number(t),wt(e)?e:i.top+Number(e)),this},moveTo:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,i=this.imageData;if(t=Number(t),e=Number(e),this.viewed&&!this.played&&this.options.movable){var a=!1;vt(t)&&(i.left=t,a=!0),vt(e)&&(i.top=e,a=!0),a&&this.renderImage()}return this},zoom:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=this.imageData;return t=Number(t),t=t<0?1/(1-t):1+t,this.zoomTo(a.width*t/a.naturalWidth,e,i),this},zoomTo:function(t){var e=this,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=this.element,s=this.options,r=this.pointers,l=this.imageData,h=l.width,c=l.height,d=l.left,u=l.top,m=l.naturalWidth,f=l.naturalHeight;if(t=Math.max(0,t),vt(t)&&this.viewed&&!this.played&&(n||s.zoomable)){if(!n){var g=Math.max(.01,s.minZoomRatio),p=Math.min(100,s.maxZoomRatio);t=Math.min(Math.max(t,g),p)}a&&t>.95&&t<1.05&&(t=1);var v=m*t,w=f*t,b=v-h,y=w-c,x=h/m;if(_t(s.zoom)&&Nt(o,ct,s.zoom,{once:!0}),!1===qt(o,ct,{ratio:t,oldRatio:x,originalEvent:a}))return this;if(this.zooming=!0,a){var _=Bt(this.viewer),k=r&&Object.keys(r).length?Ht(r):{pageX:a.pageX,pageY:a.pageY};l.left-=b*((k.pageX-_.left-d)/h),l.top-=y*((k.pageY-_.top-u)/c)}else l.left-=b/2,l.top-=y/2;l.width=v,l.height=w,l.ratio=t,this.renderImage(function(){e.zooming=!1,_t(s.zoomed)&&Nt(o,dt,s.zoomed,{once:!0}),qt(o,dt,{ratio:t,oldRatio:x,originalEvent:a})}),i&&this.tooltip()}return this},rotate:function(t){return this.rotateTo((this.imageData.rotate||0)+Number(t)),this},rotateTo:function(t){var e=this.imageData;return t=Number(t),vt(t)&&this.viewed&&!this.played&&this.options.rotatable&&(e.rotate=t,this.renderImage()),this},scaleX:function(t){return this.scale(t,this.imageData.scaleY),this},scaleY:function(t){return this.scale(this.imageData.scaleX,t),this},scale:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,i=this.imageData;if(t=Number(t),e=Number(e),this.viewed&&!this.played&&this.options.scalable){var a=!1;vt(t)&&(i.scaleX=t,a=!0),vt(e)&&(i.scaleY=e,a=!0),a&&this.renderImage()}return this},play:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isShown||this.played)return this;var i=this.options,a=this.player,n=this.loadImage.bind(this),o=[],s=0,r=0;if(this.played=!0,this.onLoadWhenPlay=n,e&&this.requestFullscreen(),zt(a,W),kt(this.items,function(t,e){var l=t.querySelector("img"),h=document.createElement("img");h.src=Mt(l,"originalUrl"),h.alt=l.getAttribute("alt"),s+=1,zt(h,S),Tt(h,Y,i.transition),St(t,C)&&(zt(h,O),r=e),o.push(h),Nt(h,K,n,{once:!0}),a.appendChild(h)}),vt(i.interval)&&i.interval>0){var l=function e(){t.playing=setTimeout(function(){Et(o[r],O),r+=1,r=r<s?r:0,zt(o[r],O),e()},i.interval)};s>1&&l()}return this},stop:function(){var t=this;if(!this.played)return this;var e=this.player;return this.played=!1,clearTimeout(this.playing),kt(e.getElementsByTagName("img"),function(e){Ot(e,K,t.onLoadWhenPlay)}),Et(e,W),e.innerHTML="",this.exitFullscreen(),this},full:function(){var t=this,e=this.options,i=this.viewer,a=this.image,n=this.list;return!this.isShown||this.played||this.fulled||!e.inline?this:(this.fulled=!0,this.open(),zt(this.button,T),e.transition&&(Et(n,Y),this.viewed&&Et(a,Y)),zt(i,z),i.setAttribute("style",""),It(i,{zIndex:e.zIndex}),this.initContainer(),this.viewerData=Dt({},this.containerData),this.renderList(),this.viewed&&this.initImage(function(){t.renderImage(function(){e.transition&&setTimeout(function(){zt(a,Y),zt(n,Y)},0)})}),this)},exit:function(){var t=this,e=this.options,i=this.viewer,a=this.image,n=this.list;return this.isShown&&!this.played&&this.fulled&&e.inline?(this.fulled=!1,this.close(),Et(this.button,T),e.transition&&(Et(n,Y),this.viewed&&Et(a,Y)),Et(i,z),It(i,{zIndex:e.zIndexInline}),this.viewerData=Dt({},this.parentData),this.renderViewer(),this.renderList(),this.viewed&&this.initImage(function(){t.renderImage(function(){e.transition&&setTimeout(function(){zt(a,Y),zt(n,Y)},0)})}),this):this},tooltip:function(){var t=this,e=this.options,i=this.tooltipBox,a=this.imageData;return this.viewed&&!this.played&&e.tooltip?(i.textContent="".concat(Math.round(100*a.ratio),"%"),this.tooltipping?clearTimeout(this.tooltipping):e.transition?(this.fading&&qt(i,st),zt(i,W),zt(i,S),zt(i,Y),i.offsetWidth,zt(i,O)):zt(i,W),this.tooltipping=setTimeout(function(){e.transition?(Nt(i,st,function(){Et(i,W),Et(i,S),Et(i,Y),t.fading=!1},{once:!0}),Et(i,O),t.fading=!0):Et(i,W),t.tooltipping=!1},1e3),this):this},toggle:function(){return 1===this.imageData.ratio?this.zoomTo(this.initialImageData.ratio,!0):this.zoomTo(1,!0),this},reset:function(){return this.viewed&&!this.played&&(this.imageData=Dt({},this.initialImageData),this.renderImage()),this},update:function(){var t=this.element,e=this.options,i=this.isImg;if(i&&!t.parentNode)return this.destroy();var a=[];if(kt(i?[t]:t.querySelectorAll("img"),function(t){e.filter?e.filter(t)&&a.push(t):a.push(t)}),!a.length)return this;if(this.images=a,this.length=a.length,this.ready){var n=[];if(kt(this.items,function(t,e){var i=t.querySelector("img"),o=a[e];o?o.src!==i.src&&n.push(e):n.push(e)}),It(this.list,{width:"auto"}),this.initList(),this.isShown)if(this.length){if(this.viewed){var o=n.indexOf(this.index);o>=0?(this.viewed=!1,this.view(Math.max(this.index-(o+1),0))):zt(this.items[this.index],C)}}else this.image=null,this.viewed=!1,this.index=0,this.imageData={},this.canvas.innerHTML="",this.title.innerHTML=""}else this.build();return this},destroy:function(){var t=this.element,e=this.options;return t[x]?(this.destroyed=!0,this.ready?(this.played&&this.stop(),e.inline?(this.fulled&&this.exit(),this.unbind()):this.isShown?(this.viewing&&(this.imageRendering?this.imageRendering.abort():this.imageInitializing&&this.imageInitializing.abort()),this.hiding&&this.transitioning.abort(),this.hidden()):this.showing&&(this.transitioning.abort(),this.hidden()),this.ready=!1,this.viewer.parentNode.removeChild(this.viewer)):e.inline&&(this.delaying?this.delaying.abort():this.initializing&&this.initializing.abort()),e.inline||Ot(t,X,this.onStart),t[x]=void 0,this):this}},Jt={open:function(){var t=this.body;zt(t,j),t.style.paddingRight="".concat(this.scrollbarWidth+(parseFloat(this.initialBodyPaddingRight)||0),"px")},close:function(){var t=this.body;Et(t,j),t.style.paddingRight=this.initialBodyPaddingRight},shown:function(){var t=this.element,e=this.options;this.fulled=!0,this.isShown=!0,this.render(),this.bind(),this.showing=!1,_t(e.shown)&&Nt(t,ot,e.shown,{once:!0}),!1!==qt(t,ot)&&this.ready&&this.isShown&&!this.hiding&&this.view(this.index)},hidden:function(){var t=this.element,e=this.options;this.fulled=!1,this.viewed=!1,this.isShown=!1,this.close(),this.unbind(),zt(this.viewer,L),this.resetList(),this.resetImage(),this.hiding=!1,this.destroyed||(_t(e.hidden)&&Nt(t,U,e.hidden,{once:!0}),qt(t,U))},requestFullscreen:function(){var t=this.element.ownerDocument;if(this.fulled&&!(t.fullscreenElement||t.webkitFullscreenElement||t.mozFullScreenElement||t.msFullscreenElement)){var e=t.documentElement;e.requestFullscreen?e.requestFullscreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT):e.mozRequestFullScreen?e.mozRequestFullScreen():e.msRequestFullscreen&&e.msRequestFullscreen()}},exitFullscreen:function(){var t=this.element.ownerDocument;this.fulled&&(t.fullscreenElement||t.webkitFullscreenElement||t.mozFullScreenElement||t.msFullscreenElement)&&(t.exitFullscreen?t.exitFullscreen():t.webkitExitFullscreen?t.webkitExitFullscreen():t.mozCancelFullScreen?t.mozCancelFullScreen():t.msExitFullscreen&&t.msExitFullscreen())},change:function(t){var e=this.options,i=this.pointers,a=i[Object.keys(i)[0]],n=a.endX-a.startX,o=a.endY-a.startY;switch(this.action){case _:this.move(n,o);break;case D:this.zoom(Pt(i),!1,t);break;case k:this.action="switched";var s=Math.abs(n);s>1&&s>Math.abs(o)&&(this.pointers={},n>1?this.prev(e.loop):n<-1&&this.next(e.loop));break;default:}kt(i,function(t){t.startX=t.endX,t.startY=t.endY})},isSwitchable:function(){var t=this.imageData,e=this.viewerData;return this.length>1&&t.left>=0&&t.top>=0&&t.width<=e.width&&t.height<=e.height}},Qt=w.Viewer,te=function(){function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(u(this,t),!e||1!==e.nodeType)throw new Error("The first argument is required and must be an element.");this.element=e,this.options=Dt({},g,xt(i)&&i),this.action=!1,this.fading=!1,this.fulled=!1,this.hiding=!1,this.imageClicked=!1,this.imageData={},this.index=this.options.initialViewIndex,this.isImg=!1,this.isShown=!1,this.length=0,this.played=!1,this.playing=!1,this.pointers={},this.ready=!1,this.showing=!1,this.timeout=!1,this.tooltipping=!1,this.viewed=!1,this.viewing=!1,this.wheeling=!1,this.zooming=!1,this.init()}return f(t,[{key:"init",value:function(){var t=this,e=this.element,i=this.options;if(!e[x]){e[x]=this;var a="img"===e.tagName.toLowerCase(),n=[];kt(a?[e]:e.querySelectorAll("img"),function(e){_t(i.filter)?i.filter.call(t,e)&&n.push(e):n.push(e)}),this.isImg=a,this.length=n.length,this.images=n;var o=e.ownerDocument,s=o.body||o.documentElement;if(this.body=s,this.scrollbarWidth=window.innerWidth-o.documentElement.clientWidth,this.initialBodyPaddingRight=window.getComputedStyle(s).paddingRight,wt(document.createElement(x).style.transition)&&(i.transition=!1),i.inline){var r=0,l=function(){var e;(r+=1,r===t.length)&&(t.initializing=!1,t.delaying={abort:function(){clearTimeout(e)}},e=setTimeout(function(){t.delaying=!1,t.build()},0))};this.initializing={abort:function(){kt(n,function(t){t.complete||Ot(t,K,l)})}},kt(n,function(t){t.complete?l():Nt(t,K,l,{once:!0})})}else Nt(e,X,this.onStart=function(e){var a=e.target;"img"!==a.tagName.toLowerCase()||_t(i.filter)&&!i.filter.call(t,a)||t.view(t.images.indexOf(a))})}}},{key:"build",value:function(){if(!this.ready){var t=this.element,e=this.options,i=t.parentNode,a=document.createElement("div");a.innerHTML=p;var n=a.querySelector(".".concat(x,"-container")),o=n.querySelector(".".concat(x,"-title")),s=n.querySelector(".".concat(x,"-toolbar")),r=n.querySelector(".".concat(x,"-navbar")),l=n.querySelector(".".concat(x,"-button")),h=n.querySelector(".".concat(x,"-canvas"));if(this.parent=i,this.viewer=n,this.title=o,this.toolbar=s,this.navbar=r,this.button=l,this.canvas=h,this.footer=n.querySelector(".".concat(x,"-footer")),this.tooltipBox=n.querySelector(".".concat(x,"-tooltip")),this.player=n.querySelector(".".concat(x,"-player")),this.list=n.querySelector(".".concat(x,"-list")),zt(o,e.title?At(Array.isArray(e.title)?e.title[0]:e.title):L),zt(r,e.navbar?At(e.navbar):L),Tt(l,L,!e.button),e.backdrop&&(zt(n,"".concat(x,"-backdrop")),e.inline||"static"===e.backdrop||$t(h,ut,"hide")),gt(e.className)&&e.className&&e.className.split(mt).forEach(function(t){zt(n,t)}),e.toolbar){var c=document.createElement("ul"),d=xt(e.toolbar),u=ft.slice(0,3),m=ft.slice(7,9),f=ft.slice(9);d||zt(s,At(e.toolbar)),kt(d?e.toolbar:ft,function(t,i){var a=d&&xt(t),n=d?Ft(i):t,o=a&&!wt(t.show)?t.show:t;if(o&&(e.zoomable||-1===u.indexOf(n))&&(e.rotatable||-1===m.indexOf(n))&&(e.scalable||-1===f.indexOf(n))){var s=a&&!wt(t.size)?t.size:t,r=a&&!wt(t.click)?t.click:t,l=document.createElement("li");l.setAttribute("role","button"),zt(l,"".concat(x,"-").concat(n)),_t(r)||$t(l,ut,n),vt(o)&&zt(l,At(o)),-1!==["small","large"].indexOf(s)?zt(l,"".concat(x,"-").concat(s)):"play"===n&&zt(l,"".concat(x,"-large")),_t(r)&&Nt(l,X,r),c.appendChild(l)}}),s.appendChild(c)}else zt(s,L);if(!e.rotatable){var g=s.querySelectorAll('li[class*="rotate"]');zt(g,N),kt(g,function(t){s.appendChild(t)})}if(e.inline)zt(l,E),It(n,{zIndex:e.zIndexInline}),"static"===window.getComputedStyle(i).position&&It(i,{position:"relative"}),i.insertBefore(n,t.nextSibling);else{zt(l,I),zt(n,z),zt(n,S),zt(n,L),It(n,{zIndex:e.zIndex});var v=e.container;gt(v)&&(v=t.ownerDocument.querySelector(v)),v||(v=this.body),v.appendChild(n)}e.inline&&(this.render(),this.bind(),this.isShown=!0),this.ready=!0,_t(e.ready)&&Nt(t,it,e.ready,{once:!0}),!1!==qt(t,it)?this.ready&&e.inline&&this.view(this.index):this.ready=!1}}}],[{key:"noConflict",value:function(){return window.Viewer=Qt,t}},{key:"setDefaults",value:function(t){Dt(g,xt(t)&&t)}}]),t}();Dt(te.prototype,Vt,Kt,Zt,Gt,Jt);var ee=te,ie=(i("0808"),{props:{isDelete:{type:Boolean,default:!1},uploadConfig:{type:Object,default:{headers:{Authorization:window.access_token},format:["jpg","jpeg","png","gif"],max_size:800,upload_url:window.uploadUrl.imageUploadToLocaleUrl+"/tmp",file_name:"file",multiple:!1,file_num:0,data:[],default_list:[{name:"",attachment_id:0,url:""},{name:"",attachment_id:0,url:""}]}}},data:function(){return{imgName:"",visible:!1,uploadList:[],formatFileList:[]}},methods:{handleRemove:function(t){var e=this.$refs.upload.fileList;this.$refs.upload.fileList.splice(e.indexOf(t),1);var i=this.fomatFile();this.$emit("input",i),this.$emit("on-upload-change",this.uploadList,i),this.ViewImage()},handleSuccess:function(t,e){e.url=t.data.url,e.name=t.data.original_name,e.attachment_id=t.data.attachment_id;var i=this.fomatFile();this.$emit("input",i),this.$emit("on-upload-change",this.uploadList,i),this.ViewImage()},fomatFile:function(){var t=[];return this.uploadList.forEach(function(e,i,a){t.push({attachment_id:e.attachment_id,url:e.url})}),this.formatFileList=t,1===this.uploadConfig.file_num&&(t=t[0]),t},handleFormatError:function(t){this.$Notice.warning({title:"文件格式不正确",desc:"文件 "+t.name+" 格式不正确。"}),this.ViewImage()},handleMaxSize:function(t){this.$Notice.warning({title:"超出文件大小限制",desc:"文件 "+t.name+" 太大，不能超过 "+this.uploadConfig.max_size+"kb"}),this.ViewImage()},handleBeforeUpload:function(){var t=this.uploadList.length<this.uploadConfig.file_num;return t||(this.$Notice.warning({title:"数量限制",desc:"最多只能上传"+this.uploadConfig.file_num+"个文件"}),this.ViewImage()),t},ViewImage:function(){this.$nextTick(function(){$(function(){$(".l-hide").click(function(){$(".l-show").removeAttr("id").addClass("l-hide").removeClass("l-show"),$(this).attr("id","galley"),$(this).addClass("l-show"),$(this).removeClass("l-hide");var t=document.getElementById("galley"),e=new ee(t,{url:"data-original",toolbar:{oneToOne:!0,prev:function(){e.prev(!0)},play:!0,next:function(){e.next(!0)},update:function(){},download:function(){var t=document.createElement("a");t.href=e.image.src,t.download=e.image.alt,document.body.appendChild(t),t.click(),document.body.removeChild(t)}}})})})})}},mounted:function(){this.uploadList=this.$refs.upload.fileList;var t=this.fomatFile();"undefined"!=t&&(this.$emit("input",t),this.$emit("on-upload-change",this.uploadList,t)),this.ViewImage()}}),ae=ie,ne=(i("6a8f"),i("2877")),oe=Object(ne["a"])(ae,l,h,!1,null,null,null),se=oe.exports,re={components:{Upload:se},data:function(){var t=this,e=function(e,i,a){""===i?a(new Error("请输入登录密码")):(""!==t.formData.password&&t.$refs.formData.validateField("password_confirmation"),a())},i=function(e,i,a){""===i?a(new Error("请输入确认密码")):i!==t.formData.password?a(new Error("两次密码不一致 ")):a()};return{modalShow:!0,saveLoading:!1,formData:{name:"",email:"",is_admin:"F",password:"",password_confirmation:"",avatar:{attachment_id:0,url:""}},imguploadConfig:{headers:{Authorization:window.access_token},format:["jpg","jpeg","png","gif"],max_size:500,upload_url:window.uploadUrl.imageUploadToLocaleUrl+"/avatar",file_name:"file",multiple:!1,file_num:1,data:{a:1,b:2},default_list:[]},rules:{name:[{required:!0,message:"请填写昵称",trigger:"blur"},{type:"string",min:2,message:"昵称至少要 2 个字符",trigger:"blur"}],email:[{required:!0,message:"请填写邮箱",trigger:"blur"},{type:"email",message:"邮箱格式不正确",trigger:"blur"}],password:[{validator:e,trigger:"blur"}],password_confirmation:[{validator:i,trigger:"blur"}]}}},methods:{addExcute:function(){var t=this;t.$refs.formData.validate(function(e){e?(t.saveLoading=!0,Object(r["a"])(t.formData).then(function(e){t.saveLoading=!1,t.modalShow=!1,t.$emit("on-add-modal-success"),t.$emit("on-add-modal-hide"),t.$Notice.success({title:e.message})},function(e){t.saveLoading=!1})):t.saveLoading=!1})},cancel:function(){this.modalShow=!1,this.$emit("on-add-modal-hide")},editContentChange:function(t,e){},uploadChange:function(t,e){}}},le=re,he=Object(ne["a"])(le,o,s,!1,null,null,null),ce=he.exports,de=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("Modal",{attrs:{closable:!1,"mask-closable":!1,width:"600"},model:{value:t.modalShow,callback:function(e){t.modalShow=e},expression:"modalShow"}},[i("p",{attrs:{slot:"header"},slot:"header"},[t._v("修改")]),i("Form",{ref:"formData",attrs:{model:t.formData,rules:t.rules,"label-position":"left","label-width":100}},[i("FormItem",{attrs:{label:"头像："}},[t.formdataFinished?i("upload",{attrs:{"is-delete":!1,"upload-config":t.imguploadConfig},on:{"on-upload-change":t.uploadChange},model:{value:t.formData.avatar,callback:function(e){t.$set(t.formData,"avatar",e)},expression:"formData.avatar"}}):t._e()],1),i("FormItem",{attrs:{label:"昵称：",prop:"name"}},[i("Input",{model:{value:t.formData.name,callback:function(e){t.$set(t.formData,"name",e)},expression:"formData.name"}})],1),i("FormItem",{attrs:{label:"邮箱："}},[i("Input",{model:{value:t.formData.email,callback:function(e){t.$set(t.formData,"email",e)},expression:"formData.email"}})],1),i("FormItem",{attrs:{label:"登录密码："}},[i("Input",{attrs:{type:"password"},model:{value:t.formData.password,callback:function(e){t.$set(t.formData,"password",e)},expression:"formData.password"}})],1),i("FormItem",{attrs:{label:"登录密码确认："}},[i("Input",{attrs:{type:"password"},model:{value:t.formData.password_confirmation,callback:function(e){t.$set(t.formData,"password_confirmation",e)},expression:"formData.password_confirmation"}})],1),i("FormItem",{attrs:{label:"可登录后台："}},[i("RadioGroup",{model:{value:t.formData.is_admin,callback:function(e){t.$set(t.formData,"is_admin",e)},expression:"formData.is_admin"}},[i("Radio",{attrs:{label:"F"}},[t._v("否")]),i("Radio",{attrs:{label:"T"}},[t._v("是")])],1)],1)],1),i("div",{attrs:{slot:"footer"},slot:"footer"},[i("Button",{attrs:{type:"text"},on:{click:t.cancel}},[t._v("取消")]),i("Button",{attrs:{type:"primary",loading:t.saveLoading},on:{click:t.editExcute}},[t._v("保存\n                ")])],1),!0===t.spinLoading?i("div",{staticClass:"demo-spin-container"},[i("Spin",{attrs:{fix:""}},[i("Icon",{staticClass:"spin-icon-load",attrs:{type:"load-c",size:"18"}}),i("div",[t._v(t._s(t.$t("table_loading")))])],1)],1):t._e()],1)],1)},ue=[],me=(i("c5f6"),{components:{Upload:se},props:{modalId:{type:Number,default:0}},data:function(){return{modalShow:!0,saveLoading:!1,spinLoading:!0,formData:{name:"",email:"",is_admin:"F",password:"",password_confirmation:"",avatar:{attachment_id:0,url:""}},formdataFinished:!1,imguploadConfig:{headers:{Authorization:window.access_token},format:["jpg","jpeg","png","gif"],max_size:500,upload_url:window.uploadUrl.imageUploadToFileSystemUrl+"/avatar",file_name:"file",multiple:!1,file_num:1,default_list:[]},rules:{name:[{required:!0,message:"请填写昵称",trigger:"blur"},{type:"string",min:2,message:"昵称至少要 2 个字符",trigger:"blur"}],email:[{required:!0,message:"请填写邮箱",trigger:"blur"},{type:"email",message:"邮箱格式不正确",trigger:"blur"}]}}},mounted:function(){this.modalId>0&&this.getInfoByIdExcute()},methods:{getInfoByIdExcute:function(){var t=this;Object(r["d"])(t.modalId).then(function(e){var i=e.data;t.formData={id:i.id,name:i.name,email:i.email,is_admin:i.is_admin,password:"",password_confirmation:"",avatar:{attachment_id:0,url:i.avatar}},t.imguploadConfig.default_list=[t.formData.avatar],t.formdataFinished=!0,t.spinLoading=!1})},editExcute:function(){var t=this,e=this;e.$refs.formData.validate(function(i){i?(e.saveLoading=!0,Object(r["c"])(e.modalId,e.formData).then(function(i){e.saveLoading=!1,e.modalShow=!1,e.$emit("on-edit-modal-success"),t.$emit("on-edit-modal-hide"),e.$Notice.success({title:i.message})},function(t){e.saveLoading=!1})):e.saveLoading=!1})},cancel:function(){this.modalShow=!1,this.$emit("on-edit-modal-hide")},editContentChange:function(t,e){},uploadChange:function(t,e){}}}),fe=me,ge=Object(ne["a"])(fe,de,ue,!1,null,null,null),pe=ge.exports,ve=i("cc5e"),we={components:{AddComponent:ce,EditComponent:pe},data:function(){return{searchForm:{order_by:"created_at,desc"},tableLoading:!1,tableStatus:{enable:[],is_admin:[]},feeds:{data:[],total:0,current_page:1,per_page:10},roleModal:{id:0,allRoles:[],hasRoles:[],show:!1,saveLoading:!1,listStyle:{width:"250px",height:"300px"}},addModal:{show:!1},editModal:{show:!1,id:0},columns:[{title:"ID",key:"id",sortable:"customer",minWidth:100},{title:"昵称",key:"name",minWidth:100},{title:"头像",key:"",width:80,slot:"avatar"},{title:"邮箱",key:"email",minWidth:150},{title:"后台权限",minWidth:150,slot:"is_admin"},{title:"启用状态",key:"enable",minWidth:150,slot:"enable"},{title:"创建时间",key:"created_at",minWidth:150},{title:"最近登录时间",key:"last_login_at",sortable:"customer",minWidth:150},{title:"操作",key:"",minWidth:200,slot:"action"}]}},created:function(){var t=this;t.getTableStatusExcute("users"),t.getAllRoleExcute(),t.getTableDataExcute(t.feeds.current_page)},methods:{handleOnPageChange:function(t){this.getTableDataExcute(t)},onPageSizeChange:function(t){this.feeds.per_page=t,this.getTableDataExcute(this.feeds.current_page)},getTableStatusExcute:function(t){var e=this;Object(c["b"])(t).then(function(t){e.tableStatus.enable=t.data.enable,e.tableStatus.is_admin=t.data.is_admin})},getTableDataExcute:function(t){var e=this;e.tableLoading=!0,e.feeds.current_page=t,Object(r["e"])(t,e.feeds.per_page,e.searchForm).then(function(t){e.feeds.data=t.data,e.feeds.total=t.meta.total,e.tableLoading=!1,e.globalFancybox()},function(t){e.tableLoading=!1})},onSortChange:function(t){var e=t.column.key+","+t.order;this.searchForm.order_by=e,this.getTableDataExcute(this.feeds.current_page)},tableButtonEdit:function(t,e){this.editModal.show=!0,this.editModal.id=t.id},tableButtonDestroyOk:function(t,e){var i=this;Object(r["b"])(t.id).then(function(t){i.feeds.data.splice(e,1),i.$Notice.success({title:t.message})})},tableButtonGiveUserRoles:function(t,e){var i=this,a=this;Object(r["g"])(t.id).then(function(t){i.roleModal.hasRoles=t.data}),a.roleModal.show=!0,a.roleModal.id=t.id},switchChange:function(t,e){var i=this,a="T";"T"===i.feeds.data[e].enable&&(a="F"),Object(c["c"])(i.feeds.data[e].id,"users",a).then(function(t){i.feeds.data[e].enable=a,i.$Notice.success({title:t.message})}).catch(function(t){i.getTableDataExcute(i.feeds.current_page)})},addBtn:function(){this.addModal.show=!0},addModalHide:function(){this.addModal.show=!1},editModalHide:function(){this.editModal.show=!1},getAllRoleExcute:function(){var t=this;Object(ve["e"])().then(function(e){t.roleModal.allRoles=e.data})},handleTransferChange:function(t){this.roleModal.hasRoles=t},renderFormat:function(t){return t.label+"「"+t.description+"」"},giveUserRoleExcute:function(){var t=this;Object(r["h"])(t.roleModal.id,t.roleModal.hasRoles).then(function(e){t.$Notice.success({title:"操作成功",desc:e.message}),t.roleModal.show=!1})},cancelRoleModal:function(){var t=this;t.roleModal.show=!1,t.roleModal.saveLoading=!1}}},be=we,ye=Object(ne["a"])(be,a,n,!1,null,null,null);e["default"]=ye.exports},cc5e:function(t,e,i){"use strict";i.d(e,"h",function(){return s}),i.d(e,"a",function(){return r}),i.d(e,"c",function(){return l}),i.d(e,"f",function(){return h}),i.d(e,"b",function(){return c}),i.d(e,"d",function(){return d}),i.d(e,"g",function(){return u}),i.d(e,"i",function(){return m}),i.d(e,"e",function(){return f});var a=i("f499"),n=i.n(a),o=i("66df"),s=function(t){return o["a"].request({url:"/api/admin/roles",params:{search_data:n()(t)},method:"get"})},r=function(t){return o["a"].request({url:"/api/admin/roles",data:t,method:"post"})},l=function(t,e){return o["a"].request({url:"/api/admin/roles/"+e,data:t,method:"patch"})},h=function(t){return o["a"].request({url:"/api/admin/roles/"+t,method:"get"})},c=function(t){return o["a"].request({url:"/api/admin/roles/"+t,method:"delete"})},d=function(){return o["a"].request({url:"/api/admin/all_permissions",method:"get"})},u=function(t){return o["a"].request({url:"api/admin/roles/"+t+"/permissions",method:"get"})},m=function(t,e){return o["a"].request({url:"/api/admin/give/"+t+"/permissions",data:{permission:e},method:"post"})},f=function(){return o["a"].request({url:"/api/admin/roles/all_roles",method:"get"})}}}]);