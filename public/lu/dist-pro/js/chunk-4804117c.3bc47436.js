(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4804117c"],{2934:function(t,e,a){"use strict";a.d(e,"b",function(){return i}),a.d(e,"d",function(){return n}),a.d(e,"c",function(){return s}),a.d(e,"e",function(){return l}),a.d(e,"a",function(){return r});var o=a("66df"),i=function(t){return o["a"].request({url:"api/get_captcha",method:"get"})},n=function(t){return o["a"].request({url:"/api/common_get_table_status/"+t,method:"get"})},s=function(t){return o["a"].request({url:"/api/common_get_config_file_data",data:{config_item:t},method:"post"})},l=function(t,e,a){return o["a"].request({url:"/api/common_switch_enable",data:{id:t,table:e,value:a},method:"post"})},r=function(t,e,a,i){return o["a"].request({url:"/api/common_edit_talbe_column",data:{id:t,table:e,column:a,value:i},method:"post"})}},9128:function(t,e,a){"use strict";var o=a("e1d1"),i=a.n(o);i.a},b92e:function(t,e,a){"use strict";var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t._l(t.uploadList,function(e,o){return t.isPreviewUploadList?a("div",{key:o,staticClass:"demo-upload-list"},["finished"===e.status?[a("a",{attrs:{href:e.url}},[t._v(t._s("附件"+(o+1)))]),a("div",{staticClass:"demo-upload-list-cover"},[a("Icon",{attrs:{type:"ios-trash-outline"},nativeOn:{click:function(a){return t.handleRemove(e)}}})],1)]:[e.showProgress?a("Progress",{attrs:{percent:e.percentage,"hide-info":""}}):t._e()]],2):t._e()}),a("Upload",{ref:"upload",staticStyle:{display:"inline-block"},attrs:{data:t.uploadConfig.data,"show-upload-list":!1,"default-file-list":t.uploadConfig.default_list,"on-success":t.handleSuccess,"on-error":t.handleError,headers:t.uploadConfig.headers,format:t.uploadConfig.format,"max-size":t.uploadConfig.max_size,"on-format-error":t.handleFormatError,"on-exceeded-size":t.handleMaxSize,"before-upload":t.handleBeforeUpload,multiple:t.uploadConfig.multiple,name:t.uploadConfig.file_name,type:"drag",action:t.uploadConfig.upload_url}},[a("Button",{attrs:{icon:"ios-cloud-upload-outline",loading:t.loading}},[t._v(t._s(t.uploadConfig.button_text)+" ")])],1),t.isPreviewUploadList?a("Divider",{attrs:{orientation:"left"}},[t._v("已上传文件")]):t._e(),t.isPreviewUploadList?a("div",{staticClass:"galley-image-list"},[a("ul",{ref:"galley",staticClass:"pictures  row l-hide"},t._l(t.formatFileList,function(e,o){return a("li",{key:o},[e.url?a("a",{attrs:{href:e.url,target:"_blank"}},[t._v("附件"+t._s(o+1))]):t._e()])}),0)]):t._e()],2)},i=[],n=(a("3a23"),a("612f"),a("497f")),s=a.n(n),l=(a("2aab"),{props:{isDelete:{type:Boolean,default:!1},isPreviewUploadList:!0,uploadConfig:{type:Object,default:{headers:{Authorization:window.access_token},format:["txt","video","doc","sql","xlsx","docx"],max_size:800,upload_url:"",file_name:"file",multiple:!1,file_num:0,data:[],default_list:[{name:"",attachment_id:0,url:""},{name:"",attachment_id:0,url:""}]}}},data:function(){return{imgName:"",visible:!1,uploadList:[],formatFileList:[],loading:!1}},methods:{handleRemove:function(t){var e=this.$refs.upload.fileList;this.$refs.upload.fileList.splice(e.indexOf(t),1);var a=this.fomatFile();this.$emit("input",a),this.$emit("on-upload-change",this.uploadList,a),this.ViewImage()},handleSuccess:function(t,e){if(this.loading=!1,!t.hasOwnProperty("status")||"success"!==t.status)return this.$Notice.error({title:"出错了，请删除后重新上传",desc:t.message}),!1;e.url=t.data.url,e.name=t.data.original_name,e.attachment_id=t.data.attachment_id;var a=this.fomatFile();this.$emit("input",a),this.$emit("on-upload-change",this.uploadList,a),this.loading=!1,this.ViewImage()},handleError:function(t,e){this.loading=!1,this.$Notice.error({title:"出错了",desc:t})},fomatFile:function(){var t=[];return this.uploadList.forEach(function(e,a,o){t.push({attachment_id:e.attachment_id,url:e.url})}),this.formatFileList=t,1===this.uploadConfig.file_num&&(t=t[0]),t},handleFormatError:function(t){this.$Notice.warning({title:"文件格式不正确",desc:"文件 "+t.name+" 格式不正确。"}),this.loading=!1,this.ViewImage()},handleMaxSize:function(t){this.$Notice.warning({title:"超出文件大小限制",desc:"文件 "+t.name+" 太大，不能超过 "+this.uploadConfig.max_size+"kb"}),this.loading=!1,this.ViewImage()},handleBeforeUpload:function(){var t=this.uploadList.length<this.uploadConfig.file_num;return t?this.loading=!0:(this.$Notice.warning({title:"数量限制",desc:"最多只能上传"+this.uploadConfig.file_num+"个文件"}),this.ViewImage()),t},ViewImage:function(){this.$nextTick(function(){$(function(){$(".l-hide").click(function(){$(".l-show").removeAttr("id").addClass("l-hide").removeClass("l-show"),$(this).attr("id","galley"),$(this).addClass("l-show"),$(this).removeClass("l-hide");var t=document.getElementById("galley"),e=new s.a(t,{url:"data-original",toolbar:{oneToOne:!0,prev:function(){e.prev(!0)},play:!0,next:function(){e.next(!0)},update:function(){},download:function(){var t=document.createElement("a");t.href=e.image.src,t.download=e.image.alt,document.body.appendChild(t),t.click(),document.body.removeChild(t)}}})})})})}},mounted:function(){this.uploadList=this.$refs.upload.fileList;var t=this.fomatFile();"undefined"!==t&&(this.$emit("input",t),this.$emit("on-upload-change",this.uploadList,t)),this.ViewImage()}}),r=l,d=(a("9128"),a("17cc")),u=Object(d["a"])(r,o,i,!1,null,null,null);e["a"]=u.exports},e1d1:function(t,e,a){},eaf4:function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Row",{attrs:{gutter:24}},[a("Col",{attrs:{xs:4,lg:8}},[a("Button",{attrs:{type:"success",icon:"plus"},on:{click:function(e){return t.addBtn()}}},[t._v(t._s(t.$t("add")))])],1),a("Col",{attrs:{xs:3,lg:3}},[a("Select",{attrs:{placeholder:"app名称"},model:{value:t.searchForm.name,callback:function(e){t.$set(t.searchForm,"name",e)},expression:"searchForm.name"}},[a("Option",{key:"",attrs:{value:""}},[t._v("全部")]),t._l(t.tableStatus.name,function(e,o){return a("Option",{key:o,attrs:{value:o}},[t._v(t._s(e))])})],2)],1),a("Col",{attrs:{xs:3,lg:3}},[a("Select",{attrs:{placeholder:"系统"},model:{value:t.searchForm.mobile_os,callback:function(e){t.$set(t.searchForm,"mobile_os",e)},expression:"searchForm.mobile_os"}},[a("Option",{key:"",attrs:{value:""}},[t._v("全部")]),t._l(t.tableStatus.mobile_os,function(e,o){return a("Option",{key:o,attrs:{value:o}},[t._v(t._s(e))])})],2)],1),a("Col",{attrs:{xs:3,lg:3}},[a("Select",{attrs:{placeholder:"是否强制更新"},model:{value:t.searchForm.is_force_update,callback:function(e){t.$set(t.searchForm,"is_force_update",e)},expression:"searchForm.is_force_update"}},[a("Option",{key:"",attrs:{value:""}},[t._v("全部")]),t._l(t.tableStatus.is_force_update,function(e,o){return a("Option",{key:o,attrs:{value:o}},[t._v(t._s(e))])})],2)],1),a("Col",{staticClass:"hidden-mobile",attrs:{xs:5,lg:3}},[a("Input",{attrs:{icon:"search",placeholder:"请输入版本号..."},model:{value:t.searchForm.version_sn,callback:function(e){t.$set(t.searchForm,"version_sn",e)},expression:"searchForm.version_sn"}})],1),a("Col",{attrs:{xs:3,lg:3}},[a("Button",{attrs:{type:"primary",icon:"ios-search"},on:{click:function(e){return t.getTableDataExcute()}}},[t._v(t._s(t.$t("search")))])],1)],1),a("br"),a("Row",[t.tableLoading?a("div",{staticClass:"demo-spin-container"},[a("Spin",{attrs:{fix:""}},[a("Icon",{staticClass:"spin-icon-load",attrs:{type:"load-c",size:"18"}}),a("div",[t._v(t._s(t.$t("table_loading")))])],1)],1):t._e(),a("Table",{attrs:{border:"",columns:t.columns,data:t.dataList},on:{"on-sort-change":t.onSortChange},scopedSlots:t._u([{key:"weight",fn:function(t){var e=t.row,o=t.index;return[a("table-edit",{attrs:{table:"carousels",column:"weight",id:e.id,value:e.weight,index:o}})]}},{key:"name",fn:function(e){var a=e.row;e.index;return[t._v("\n          "+t._s(t.tableStatus.name[a.name])+"\n      ")]}},{key:"mobile_os",fn:function(e){var a=e.row;e.index;return[t._v("\n          "+t._s(t.tableStatus.mobile_os[a.mobile_os])+"\n      ")]}},{key:"action",fn:function(e){var o=e.row,i=e.index;return[a("Button",{staticStyle:{"margin-right":"5px"},attrs:{type:"success",size:"small"},on:{click:function(e){return t.tableButtonEdit(o,i)}}},[t._v(t._s(t.$t("edit")))]),a("Button",{staticStyle:{"margin-right":"5px"},attrs:{type:"primary",size:"small"},on:{click:function(e){return t.tableButtonShowInfo(o,i)}}},[t._v(t._s(t.$t("show_info")))])]}}])})],1),t.addModal.show?a("add-component",{attrs:{"table-status":t.tableStatus},on:{"on-add-modal-success":t.getTableDataExcute,"on-add-modal-hide":t.addModalHide}}):t._e(),t.editModal.show?a("edit-component",{attrs:{"table-status":t.tableStatus,"modal-id":t.editModal.id},on:{"on-edit-modal-success":t.getTableDataExcute,"on-edit-modal-hide":t.editModalHide}}):t._e(),t.showInfoModal.show?a("show-info",{attrs:{info:t.showInfoModal.info},on:{"show-modal-close":t.showModalClose}}):t._e()],1)},i=[],n=(a("3a23"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Modal",{attrs:{closable:!1,"mask-closable":!1,width:"600"},model:{value:t.modalShow,callback:function(e){t.modalShow=e},expression:"modalShow"}},[a("p",{attrs:{slot:"header"},slot:"header"},[t._v(t._s(t.$t("add")))]),a("Form",{ref:"formData",attrs:{model:t.formData,rules:t.rules,"label-position":"left","label-width":100}},[a("FormItem",{attrs:{label:"app："}},[a("Select",{attrs:{filterable:"",placeholder:"请选择app"},model:{value:t.formData.name,callback:function(e){t.$set(t.formData,"name",e)},expression:"formData.name"}},t._l(t.tableStatus.name,function(e,o){return a("Option",{key:o,attrs:{value:o}},[t._v(t._s(e)+" ")])}),1)],1),a("FormItem",{attrs:{label:"系统："}},[a("Select",{attrs:{placeholder:"请选择系统"},model:{value:t.formData.mobile_os,callback:function(e){t.$set(t.formData,"mobile_os",e)},expression:"formData.mobile_os"}},t._l(t.tableStatus.mobile_os,function(e,o){return a("Option",{key:o,attrs:{value:o}},[t._v(t._s(e)+" ")])}),1)],1),a("FormItem",{attrs:{label:"安装包："}},[a("upload-file",{attrs:{isPreviewUploadList:!0,"upload-config":t.fileuploadConfig},on:{"on-upload-change":t.uploadfileChange},model:{value:t.formData.package_url,callback:function(e){t.$set(t.formData,"package_url",e)},expression:"formData.package_url"}})],1),a("FormItem",{attrs:{label:"强制更新："}},[a("RadioGroup",{model:{value:t.formData.is_force_update,callback:function(e){t.$set(t.formData,"is_force_update",e)},expression:"formData.is_force_update"}},t._l(t.tableStatus.is_force_update,function(e,o){return a("Radio",{key:o,attrs:{label:o}},[t._v(t._s(e))])}),1)],1),a("FormItem",{attrs:{label:"版本号："}},[a("Input",{staticStyle:{width:"auto"},attrs:{placeholder:"请输入版本号"},model:{value:t.formData.version_sn,callback:function(e){t.$set(t.formData,"version_sn",e)},expression:"formData.version_sn"}})],1),a("FormItem",{attrs:{label:"简介："}},[a("Input",{attrs:{type:"textarea",rows:4,placeholder:"请输入"},model:{value:t.formData.description,callback:function(e){t.$set(t.formData,"description",e)},expression:"formData.description"}})],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"text"},on:{click:t.cancel}},[t._v(t._s(t.$t("cancel")))]),a("Button",{attrs:{type:"primary",loading:t.saveLoading},on:{click:t.addExcute}},[t._v(t._s(t.$t("save"))+" ")])],1)],1)],1)}),s=[],l=a("66df"),r=function(t){return l["a"].request({url:"/api/admin/app_versions",params:{search_data:JSON.stringify(t)},method:"get"})},d=function(t){return l["a"].request({url:"/api/admin/app_versions",data:t,method:"post"})},u=function(t,e){return l["a"].request({url:"/api/admin/app_versions/"+e,data:t,method:"patch"})},c=function(t){return l["a"].request({url:"/api/admin/app_versions/"+t,method:"get"})},m=a("b92e"),f={components:{UploadFile:m["a"]},props:["tableStatus"],data:function(){return{modalShow:!0,saveLoading:!1,formData:{name:"",mobile_os:"",version_sn:"",description:"",is_force_update:"F",package_url:{attachment_id:0,url:""}},fileuploadConfig:{headers:{Authorization:window.access_token},format:["apk","wgt"],max_size:2048e4,upload_url:window.uploadUrl.uploadToLocaleUrl+"/file/apk",file_name:"file",multiple:!1,file_num:1,data:{},button_text:"上传文件",default_list:[]},rules:{}}},methods:{addExcute:function(){var t=this;t.saveLoading=!0,d(t.formData).then(function(e){t.saveLoading=!1,t.modalShow=!1,t.$emit("on-add-modal-success"),t.$emit("on-add-modal-hide"),t.$Notice.success({title:e.message})},function(e){t.saveLoading=!1})},cancel:function(){this.modalShow=!1,this.$emit("on-add-modal-hide")},uploadfileChange:function(t,e){}}},p=f,h=a("17cc"),_=Object(h["a"])(p,n,s,!1,null,null,null),v=_.exports,b=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Modal",{attrs:{closable:!1,"mask-closable":!1,width:"600"},model:{value:t.modalShow,callback:function(e){t.modalShow=e},expression:"modalShow"}},[a("p",{attrs:{slot:"header"},slot:"header"},[t._v(t._s(t.$t("edit")))]),a("Form",{ref:"formData",attrs:{model:t.formData,rules:t.rules,"label-position":"left","label-width":100}},[a("FormItem",{attrs:{label:"app："}},[a("Select",{attrs:{filterable:"",placeholder:"请选择app"},model:{value:t.formData.name,callback:function(e){t.$set(t.formData,"name",e)},expression:"formData.name"}},t._l(t.tableStatus.name,function(e,o){return a("Option",{key:o,attrs:{value:o}},[t._v(t._s(e)+" ")])}),1)],1),a("FormItem",{attrs:{label:"系统："}},[a("Select",{attrs:{placeholder:"请选择系统"},model:{value:t.formData.mobile_os,callback:function(e){t.$set(t.formData,"mobile_os",e)},expression:"formData.mobile_os"}},t._l(t.tableStatus.mobile_os,function(e,o){return a("Option",{key:o,attrs:{value:o}},[t._v(t._s(e)+" ")])}),1)],1),a("FormItem",{attrs:{label:"安装包："}},[t.formdataFinished?a("upload-file",{attrs:{isPreviewUploadList:!0,"upload-config":t.fileuploadConfig},on:{"on-upload-change":t.uploadfileChange},model:{value:t.formData.package_url,callback:function(e){t.$set(t.formData,"package_url",e)},expression:"formData.package_url"}}):t._e()],1),a("FormItem",{attrs:{label:"强制更新："}},[a("RadioGroup",{model:{value:t.formData.is_force_update,callback:function(e){t.$set(t.formData,"is_force_update",e)},expression:"formData.is_force_update"}},t._l(t.tableStatus.is_force_update,function(e,o){return a("Radio",{key:o,attrs:{label:o}},[t._v(t._s(e))])}),1)],1),a("FormItem",{attrs:{label:"版本号："}},[a("Input",{staticStyle:{width:"auto"},attrs:{placeholder:"请输入版本号"},model:{value:t.formData.version_sn,callback:function(e){t.$set(t.formData,"version_sn",e)},expression:"formData.version_sn"}})],1),a("FormItem",{attrs:{label:"简介："}},[a("Input",{attrs:{type:"textarea",rows:4,placeholder:"请输入"},model:{value:t.formData.description,callback:function(e){t.$set(t.formData,"description",e)},expression:"formData.description"}})],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"text"},on:{click:t.cancel}},[t._v(t._s(t.$t("cancel")))]),a("Button",{attrs:{type:"primary",loading:t.saveLoading},on:{click:t.editExcute}},[t._v(t._s(t.$t("save"))+" ")])],1),!0===t.spinLoading?a("div",{staticClass:"demo-spin-container"},[a("Spin",{attrs:{fix:""}},[a("Icon",{staticClass:"spin-icon-load",attrs:{type:"load-c",size:"18"}}),a("div",[t._v(t._s(t.$t("table_loading")))])],1)],1):t._e()],1)],1)},g=[],w={components:{UploadFile:m["a"]},props:["tableStatus","modalId"],data:function(){return{modalShow:!0,saveLoading:!1,spinLoading:!0,formdataFinished:!1,formData:{name:"",mobile_os:"",version_sn:"",description:"",is_force_update:"F",package_url:{attachment_id:0,url:""}},fileuploadConfig:{headers:{Authorization:window.access_token},format:["apk","wgt"],max_size:2048e4,upload_url:window.uploadUrl.uploadToLocaleUrl+"/file/apk",file_name:"file",multiple:!1,file_num:1,data:{},button_text:"上传文件",default_list:[]},rules:{}}},mounted:function(){this.modalId>0&&this.getInfoByIdExcute()},methods:{getInfoByIdExcute:function(){var t=this;c(t.modalId).then(function(e){var a=e.data;t.formData={name:a.name,mobile_os:a.mobile_os,version_sn:a.version_sn,description:a.description,is_force_update:a.is_force_update,package_url:{attachment_id:0,url:a.package_url}},t.fileuploadConfig.default_list=[t.formData.package_url],t.spinLoading=!1,t.formdataFinished=!0})},editExcute:function(){var t=this;t.saveLoading=!0,u(t.formData,t.modalId).then(function(e){t.saveLoading=!1,t.modalShow=!1,t.$emit("on-edit-modal-success"),t.$emit("on-edit-modal-hide"),t.$Notice.success({title:e.message})},function(e){t.saveLoading=!1})},cancel:function(){this.modalShow=!1,this.$emit("on-edit-modal-hide")},uploadfileChange:function(t,e){}}},k=w,x=Object(h["a"])(k,b,g,!1,null,null,null),y=x.exports,$=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Drawer",{attrs:{closable:!0,title:"版本信息",width:t.platformIsPc?30:80},on:{"on-close":t.closed},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[a("div",{staticClass:"drawer-profile"},[a("Row",[a("li",[a("span",{staticClass:"blod-font"},[t._v("版本号：")]),t._v(" "+t._s(t.info.version_sn)+" ")]),a("li",[a("span",{staticClass:"blod-font"},[t._v("发布时间：")]),t._v(" "+t._s(t.info.version_sn)+" ")])]),a("h2",{staticClass:"text-center margin-top-8"},[t._v("版本描述")]),a("div",{staticClass:"text-center",domProps:{innerHTML:t._s(t.info.description)}})],1)])],1)},S=[],D={props:["info"],data:function(){return{show:!0,agreement:""}},computed:{platformIsPc:function(){return"pc"===this.globalPlatformType()}},methods:{closed:function(){this.show=!1,this.$emit("show-modal-close")}}},C=D,I=Object(h["a"])(C,$,S,!1,null,null,null),F=I.exports,L=a("90de"),E=a("2934"),M={components:{AddComponent:v,EditComponent:y,ShowInfo:F},data:function(){return{searchForm:{order_by:"id,desc",mobile_os:"",is_force_update:"",name:""},tableStatus:{mobile_os:[],is_force_update:[],name:[]},tableLoading:!0,dataList:[],addModal:{show:!1},editModal:{show:!1,id:0},showInfoModal:{show:!1,info:""},columns:[{title:"ID",key:"id",sortable:"customer",minWidth:100},{title:"app",minWidth:100,slot:"name"},{title:"系统",minWidth:50,slot:"mobile_os"},{title:"是否强更",minWidth:50,key:"is_force_update"},{title:"版本号",minWidth:100,sortable:"customer",key:"version_sn"},{title:"描述",key:"description",minWidth:100,tooltip:!0},{title:"发布时间",key:"created_at",minWidth:150},{title:"更新时间",key:"created_at",minWidth:150},{title:"操作",minWidth:200,slot:"action"}]}},created:function(){var t=this;t.getTableStatusExcute("app_versions")},methods:{getTableStatusExcute:function(t){var e=this;Object(E["d"])(t).then(function(t){e.tableStatus.mobile_os=t.data.mobile_os,e.tableStatus.is_force_update=t.data.is_force_update,e.tableStatus.name=t.data.name,e.getTableDataExcute()})},getTableDataExcute:function(){var t=this;t.tableLoading=!0,r(t.searchForm).then(function(e){var a=e.data;t.dataList=a,t.tableLoading=!1},function(e){t.tableLoading=!1})},tableButtonEdit:function(t,e){this.editModal.show=!0,this.editModal.id=t.id},tableButtonShowInfo:function(t,e){this.showInfoModal.show=!0,this.showInfoModal.info=t},showModalClose:function(){this.showInfoModal.show=!1},onSortChange:function(t){var e=t.column.key+","+t.order;Object(L["i"])(t.column.key,this.notRealySortKey)||(this.searchForm.order_by=e,this.getTableDataExcute(this.feeds.current_page))},addBtn:function(){this.addModal.show=!0},addModalHide:function(){this.addModal.show=!1},editModalHide:function(){this.editModal.show=!1}}},O=M,B=Object(h["a"])(O,o,i,!1,null,null,null);e["default"]=B.exports}}]);