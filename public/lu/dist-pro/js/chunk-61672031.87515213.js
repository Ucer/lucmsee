(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-61672031"],{2934:function(t,e,a){"use strict";a.d(e,"b",function(){return n}),a.d(e,"d",function(){return i}),a.d(e,"c",function(){return s}),a.d(e,"e",function(){return r}),a.d(e,"a",function(){return l});var o=a("66df"),n=function(t){return o["a"].request({url:"api/get_captcha",method:"get"})},i=function(t){return o["a"].request({url:"/api/common_get_table_status/"+t,method:"get"})},s=function(t){return o["a"].request({url:"/api/common_get_config_file_data",data:{config_item:t},method:"post"})},r=function(t,e,a){return o["a"].request({url:"/api/common_switch_enable",data:{id:t,table:e,value:a},method:"post"})},l=function(t,e,a,n){return o["a"].request({url:"/api/common_edit_talbe_column",data:{id:t,table:e,column:a,value:n},method:"post"})}},"6a8f":function(t,e,a){"use strict";var o=a("a447"),n=a.n(o);n.a},"8f8b":function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Row",{attrs:{gutter:24}},[a("Col",{attrs:{xs:7,lg:11}},[t.isHasRoleToAccess(["Founder","Maintainer"])?a("Button",{attrs:{type:"success",icon:"plus"},on:{click:function(e){return t.addBtn()}}},[t._v(t._s(t.$t("add")))]):t._e()],1),a("Col",{attrs:{xs:3,lg:3}},[a("Select",{attrs:{placeholder:"请选择状态"},model:{value:t.searchForm.enable,callback:function(e){t.$set(t.searchForm,"enable",e)},expression:"searchForm.enable"}},[a("Option",{key:"",attrs:{value:""}},[t._v("全部")]),t._l(t.tableStatus.enable,function(e,o){return a("Option",{key:o,attrs:{value:o}},[t._v(t._s(e))])})],2)],1),a("Col",{attrs:{xs:3,lg:3}},[a("Select",{attrs:{placeholder:"是否能登录后台"},model:{value:t.searchForm.is_admin,callback:function(e){t.$set(t.searchForm,"is_admin",e)},expression:"searchForm.is_admin"}},[a("Option",{key:"",attrs:{value:""}},[t._v("全部")]),t._l(t.tableStatus.is_admin,function(e,o){return a("Option",{key:o,attrs:{value:o}},[t._v(t._s(e))])})],2)],1),a("Col",{staticClass:"hidden-mobile",attrs:{xs:6,lg:3}},[a("Input",{attrs:{icon:"search",placeholder:"请输入邮箱搜索..."},model:{value:t.searchForm.email,callback:function(e){t.$set(t.searchForm,"email",e)},expression:"searchForm.email"}})],1),a("Col",{attrs:{xs:3,lg:3}},[a("Button",{attrs:{type:"primary",icon:"ios-search"},on:{click:function(e){return t.getTableDataExcute(t.feeds.current_page)}}},[t._v(t._s(t.$t("search")))])],1)],1),a("br"),a("Row",[t.tableLoading?a("div",{staticClass:"demo-spin-container"},[a("Spin",{attrs:{fix:""}},[a("Icon",{staticClass:"spin-icon-load",attrs:{type:"load-c",size:"18"}}),a("div",[t._v(t._s(t.$t("table_loading")))])],1)],1):t._e(),a("Table",{attrs:{border:"",columns:t.columns,data:t.feeds.data},on:{"on-sort-change":t.onSortChange},scopedSlots:t._u([{key:"avatar",fn:function(e){var o=e.row;e.index;return[a("div",{staticClass:"text-center"},[o.avatar?a("Avatar",{staticClass:"fancybox",attrs:{size:"large",src:o.avatar,href:o.avatar,title:"头像",alt:"头像"}}):a("Avatar",{staticStyle:{color:"#f56a00","background-color":"#fde3cf"},attrs:{size:"large"}},[t._v(t._s(o.real_name.substr(0,1)))])],1)]}},{key:"is_admin",fn:function(e){var o=e.row;e.index;return["T"===o.is_admin?a("Tag",{attrs:{color:"green"}},[t._v("可登录")]):a("Tag",{attrs:{color:"red"}},[t._v("不可登录")])]}},{key:"enable",fn:function(e){var o=e.row,n=e.index;return[a("iSwitch",{attrs:{slot:"open",type:"primary",value:"T"===o.enable},on:{"on-change":function(e){return t.switchChange(o,n)}},slot:"open"})]}},{key:"action",fn:function(e){var o=e.row,n=e.index;return[t.isHasRoleToAccess(["Founder","Maintainer"])?a("Button",{staticStyle:{"margin-right":"5px"},attrs:{type:"success",size:"small"},on:{click:function(e){return t.tableButtonEdit(o,n)}}},[t._v(t._s(t.$t("edit")))]):t._e(),t.isHasRoleToAccess(["Founder","Developer"])?a("Button",{staticStyle:{"margin-right":"5px"},attrs:{type:"info",size:"small"},on:{click:function(e){return t.tableButtonGiveUserRoles(o,n)}}},[t._v(t._s(t.$t("role")))]):t._e(),t.isHasRoleToAccess(["Founder","Developer"])?a("Poptip",{attrs:{confirm:"",title:"您确定要删除ID为："+o.id+" 的记录？"},on:{"on-ok":function(e){return t.tableButtonDestroyOk(o,n)}}},[a("Button",{staticStyle:{"margin-right":"5px"},attrs:{type:"error",size:"small"}},[t._v(t._s(t.$t("destroy")))])],1):t._e()]}}])}),a("div",{staticStyle:{margin:"10px",overflow:"hidden"}},[a("div",{staticStyle:{float:"right"}},[a("Page",{staticClass:"paging",attrs:{total:t.feeds.total,current:t.feeds.current_page,"page-size":t.feeds.per_page,"show-elevator":"","show-total":"","show-sizer":""},on:{"on-change":t.handleOnPageChange,"on-page-size-change":t.onPageSizeChange}})],1)])],1),a("Modal",{attrs:{closable:!1,"mask-closable":!1,width:"800"},model:{value:t.roleModal.show,callback:function(e){t.$set(t.roleModal,"show",e)},expression:"roleModal.show"}},[a("h3",{staticStyle:{color:"#2D8CF0"},attrs:{slot:"header"},slot:"header"},[t._v("分配角色")]),t.roleModal.show?a("Transfer",{attrs:{data:t.roleModal.allRoles,"target-keys":t.roleModal.hasRoles,"render-format":t.renderFormat,operations:["移除角色","添加角色"],"list-style":t.roleModal.listStyle,filterable:""},on:{"on-change":t.handleTransferChange}}):t._e(),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"text"},on:{click:t.cancelRoleModal}},[t._v("取消")]),a("Button",{attrs:{type:"primary"},on:{click:t.giveUserRoleExcute}},[t._v("保存 ")])],1)],1),t.addModal.show?a("add-component",{attrs:{tableStatus_is_admin:t.tableStatus.is_admin},on:{"on-add-modal-success":function(e){return t.getTableDataExcute(t.feeds.current_page)},"on-add-modal-hide":t.addModalHide}}):t._e(),t.editModal.show?a("edit-component",{attrs:{tableStatus_is_admin:t.tableStatus.is_admin,"modal-id":t.editModal.id},on:{"on-edit-modal-success":function(e){return t.getTableDataExcute(t.feeds.current_page)},"on-edit-modal-hide":t.editModalHide}}):t._e()],1)},n=[],i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Modal",{attrs:{closable:!1,"mask-closable":!1,width:"600"},model:{value:t.modalShow,callback:function(e){t.modalShow=e},expression:"modalShow"}},[a("p",{attrs:{slot:"header"},slot:"header"},[t._v(t._s(t.$t("add")))]),a("Form",{ref:"formData",attrs:{model:t.formData,rules:t.rules,"label-position":"left","label-width":100}},[a("FormItem",{attrs:{label:"头像："}},[a("upload",{attrs:{"upload-config":t.imguploadConfig},on:{"on-upload-change":t.uploadChange},model:{value:t.formData.avatar,callback:function(e){t.$set(t.formData,"avatar",e)},expression:"formData.avatar"}})],1),a("FormItem",{attrs:{label:"真实姓名：",prop:"real_name"}},[a("Input",{model:{value:t.formData.real_name,callback:function(e){t.$set(t.formData,"real_name",e)},expression:"formData.real_name"}})],1),a("FormItem",{attrs:{label:"昵称：",prop:"nickname"}},[a("Input",{model:{value:t.formData.nickname,callback:function(e){t.$set(t.formData,"nickname",e)},expression:"formData.nickname"}})],1),a("FormItem",{attrs:{label:"邮箱："}},[a("Input",{model:{value:t.formData.email,callback:function(e){t.$set(t.formData,"email",e)},expression:"formData.email"}})],1),a("FormItem",{attrs:{label:"登录密码：",prop:"password"}},[a("Input",{attrs:{type:"password"},model:{value:t.formData.password,callback:function(e){t.$set(t.formData,"password",e)},expression:"formData.password"}})],1),a("FormItem",{attrs:{label:"登录密码确认：",prop:"password_confirmation"}},[a("Input",{attrs:{type:"password"},model:{value:t.formData.password_confirmation,callback:function(e){t.$set(t.formData,"password_confirmation",e)},expression:"formData.password_confirmation"}})],1),a("FormItem",{attrs:{label:"可登录后台："}},[a("RadioGroup",{model:{value:t.formData.is_admin,callback:function(e){t.$set(t.formData,"is_admin",e)},expression:"formData.is_admin"}},t._l(t.tableStatus_is_admin,function(e,o){return a("Radio",{key:o,attrs:{label:o}},[t._v(t._s(e))])}),1)],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"text"},on:{click:t.cancel}},[t._v(t._s(t.$t("cancel")))]),a("Button",{attrs:{type:"primary",loading:t.saveLoading},on:{click:t.addExcute}},[t._v(t._s(t.$t("save")))])],1)],1)],1)},s=[],r=a("c24f"),l=a("c13c"),d={props:["tableStatus_is_admin"],components:{Upload:l["a"]},data:function(){var t=this,e=function(e,a,o){""===a?o(new Error("请输入登录密码")):(""!==t.formData.password&&t.$refs.formData.validateField("password_confirmation"),o())},a=function(e,a,o){""===a?o(new Error("请输入确认密码")):a!==t.formData.password?o(new Error("两次密码不一致 ")):o()};return{modalShow:!0,saveLoading:!1,formData:{nickname:"",real_name:"",email:"",is_admin:"F",password:"",password_confirmation:"",avatar:{attachment_id:0,url:""}},imguploadConfig:{headers:{Authorization:window.access_token},format:["jpg","jpeg","png","gif"],max_size:500,upload_url:window.uploadUrl.uploadToLocaleUrl+"/pic/avatar",file_name:"file",multiple:!1,file_num:1,data:{user_id:this.$store.state.user.user_id,max_width:300,plat_name:window.systemConfigIndexFile.platName,access_token:window.systemConfigIndexFile.domainForFileSystem.access_token},default_list:[]},rules:{real_name:[{required:!0,message:"请填写真实姓名",trigger:"blur"},{type:"string",min:2,message:"真实姓名至少要 2 个字符",trigger:"blur"}],email:[{required:!0,message:"请填写邮箱",trigger:"blur"},{type:"email",message:"邮箱格式不正确",trigger:"blur"}],password:[{validator:e,trigger:"blur"}],password_confirmation:[{validator:a,trigger:"blur"}]}}},methods:{addExcute:function(){var t=this;t.$refs.formData.validate(function(e){e?(t.saveLoading=!0,Object(r["a"])(t.formData).then(function(e){t.saveLoading=!1,t.modalShow=!1,t.$emit("on-add-modal-success"),t.$emit("on-add-modal-hide"),t.$Notice.success({title:e.message}),t.saveLoading=!1},function(e){t.saveLoading=!1})):t.saveLoading=!1})},cancel:function(){this.modalShow=!1,this.$emit("on-add-modal-hide")},editContentChange:function(t,e){},uploadChange:function(t,e){}}},c=d,u=a("6691"),m=Object(u["a"])(c,i,s,!1,null,null,null),f=m.exports,p=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Modal",{attrs:{closable:!1,"mask-closable":!1,width:"600"},model:{value:t.modalShow,callback:function(e){t.modalShow=e},expression:"modalShow"}},[a("p",{attrs:{slot:"header"},slot:"header"},[t._v("修改")]),a("Form",{ref:"formData",attrs:{model:t.formData,rules:t.rules,"label-position":"left","label-width":100}},[a("FormItem",{attrs:{label:"头像："}},[t.formdataFinished?a("upload",{attrs:{"upload-config":t.imguploadConfig},on:{"on-upload-change":t.uploadChange},model:{value:t.formData.avatar,callback:function(e){t.$set(t.formData,"avatar",e)},expression:"formData.avatar"}}):t._e()],1),a("FormItem",{attrs:{label:"真实姓名：",prop:"real_name"}},[a("Input",{model:{value:t.formData.real_name,callback:function(e){t.$set(t.formData,"real_name",e)},expression:"formData.real_name"}})],1),a("FormItem",{attrs:{label:"昵称：",prop:"nickname"}},[a("Input",{model:{value:t.formData.nickname,callback:function(e){t.$set(t.formData,"nickname",e)},expression:"formData.nickname"}})],1),a("FormItem",{attrs:{label:"邮箱："}},[a("Input",{model:{value:t.formData.email,callback:function(e){t.$set(t.formData,"email",e)},expression:"formData.email"}})],1),a("FormItem",{attrs:{label:"登录密码：",prop:"password"}},[a("Input",{attrs:{type:"password"},model:{value:t.formData.password,callback:function(e){t.$set(t.formData,"password",e)},expression:"formData.password"}})],1),a("FormItem",{attrs:{label:"登录密码确认：",prop:"password_confirmation"}},[a("Input",{attrs:{type:"password"},model:{value:t.formData.password_confirmation,callback:function(e){t.$set(t.formData,"password_confirmation",e)},expression:"formData.password_confirmation"}})],1),a("FormItem",{attrs:{label:"可登录后台："}},[a("RadioGroup",{model:{value:t.formData.is_admin,callback:function(e){t.$set(t.formData,"is_admin",e)},expression:"formData.is_admin"}},t._l(t.tableStatus_is_admin,function(e,o){return a("Radio",{key:o,attrs:{label:o}},[t._v(t._s(e))])}),1)],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"text"},on:{click:t.cancel}},[t._v("取消")]),a("Button",{attrs:{type:"primary",loading:t.saveLoading},on:{click:t.editExcute}},[t._v("保存\n      ")])],1),!0===t.spinLoading?a("div",{staticClass:"demo-spin-container"},[a("Spin",{attrs:{fix:""}},[a("Icon",{staticClass:"spin-icon-load",attrs:{type:"load-c",size:"18"}}),a("div",[t._v(t._s(t.$t("table_loading")))])],1)],1):t._e()],1)],1)},h=[],g=(a("d4d5"),{components:{Upload:l["a"]},props:{modalId:{type:Number,default:0},tableStatus_is_admin:""},data:function(){return{modalShow:!0,saveLoading:!1,spinLoading:!0,formData:{nickname:"",real_name:"",email:"",is_admin:"F",password:"",password_confirmation:"",avatar:{attachment_id:0,url:""}},formdataFinished:!1,imguploadConfig:{headers:{Authorization:window.access_token},format:["jpg","jpeg","png","gif"],max_size:500,upload_url:window.uploadUrl.uploadToLocaleUrl+"/pic/avatar",file_name:"file",multiple:!1,file_num:1,data:{user_id:this.$store.state.user.user_id,max_width:300,plat_name:window.systemConfigIndexFile.platName,access_token:window.systemConfigIndexFile.domainForFileSystem.access_token},default_list:[]},rules:{real_name:[{required:!0,message:"请填写真实姓名",trigger:"blur"},{type:"string",min:2,message:"真实姓名至少要 2 个字符",trigger:"blur"}],email:[{required:!0,message:"请填写邮箱",trigger:"blur"},{type:"email",message:"邮箱格式不正确",trigger:"blur"}]}}},mounted:function(){this.modalId>0&&this.getInfoByIdExcute()},methods:{getInfoByIdExcute:function(){var t=this;Object(r["d"])(t.modalId).then(function(e){var a=e.data;t.formData={id:a.id,real_name:a.real_name,nickname:a.nickname,email:a.email,is_admin:a.is_admin,password:"",password_confirmation:"",avatar:{attachment_id:0,url:a.avatar}},t.imguploadConfig.default_list=[t.formData.avatar],t.formdataFinished=!0,t.spinLoading=!1})},editExcute:function(){var t=this,e=this;e.$refs.formData.validate(function(a){a?(e.saveLoading=!0,Object(r["c"])(e.formData,e.modalId).then(function(a){e.saveLoading=!1,e.modalShow=!1,e.$emit("on-edit-modal-success"),t.$emit("on-edit-modal-hide"),e.$Notice.success({title:a.message})},function(t){e.saveLoading=!1})):e.saveLoading=!1})},cancel:function(){this.modalShow=!1,this.$emit("on-edit-modal-hide")},editContentChange:function(t,e){},uploadChange:function(t,e){}}}),_=g,v=Object(u["a"])(_,p,h,!1,null,null,null),b=v.exports,w=a("cc5e"),y=a("90de"),x=a("2934"),k={components:{AddComponent:f,EditComponent:b},data:function(){return{searchForm:{order_by:"created_at,desc",is_admin:"",enable:""},notRealySortKey:[],tableLoading:!1,tableStatus:{enable:[],is_admin:[]},feeds:{data:[],total:0,current_page:1,per_page:10},roleModal:{id:0,allRoles:[],hasRoles:[],show:!1,saveLoading:!1,listStyle:{width:"250px",height:"300px"}},addModal:{show:!1},editModal:{show:!1,id:0},columns:[{title:"ID",key:"id",sortable:"customer",minWidth:100},{title:"姓名",key:"real_name",minWidth:100},{title:"昵称",key:"nickname",minWidth:100},{title:"头像",key:"",width:80,slot:"avatar"},{title:"邮箱",key:"email",minWidth:150},{title:"后台权限",minWidth:80,slot:"is_admin"},{title:"启用状态",key:"enable",minWidth:80,slot:"enable"},{title:"创建时间",key:"created_at",minWidth:150},{title:"最近登录时间",key:"last_login_at",sortable:"customer",minWidth:150},{title:"操作",key:"",minWidth:200,slot:"action"}]}},created:function(){var t=this;t.getTableStatusExcute("users"),t.getAllRoleExcute()},computed:{},methods:{handleOnPageChange:function(t){this.getTableDataExcute(t)},onPageSizeChange:function(t){this.feeds.per_page=t,this.getTableDataExcute(this.feeds.current_page)},getTableStatusExcute:function(t){var e=this;Object(x["d"])(t).then(function(t){e.tableStatus.enable=t.data.enable,e.tableStatus.is_admin=t.data.is_admin,e.getTableDataExcute(e.feeds.current_page)})},getTableDataExcute:function(t){var e=this;e.tableLoading=!0,e.feeds.current_page=t,Object(r["e"])(t,e.feeds.per_page,e.searchForm).then(function(t){e.feeds.data=t.data,e.feeds.total=t.meta.total,e.tableLoading=!1,e.globalFancybox()},function(t){e.tableLoading=!1})},onSortChange:function(t){var e=t.column.key+","+t.order;oneOf(t.column.key,this.notRealySortKey)||(this.searchForm.order_by=e,this.getTableDataExcute(this.feeds.current_page))},tableButtonEdit:function(t,e){this.editModal.show=!0,this.editModal.id=t.id},tableButtonDestroyOk:function(t,e){var a=this;Object(r["b"])(t.id).then(function(t){a.feeds.data.splice(e,1),a.$Notice.success({title:t.message})})},tableButtonGiveUserRoles:function(t,e){var a=this,o=this;Object(r["g"])(t.id).then(function(t){a.roleModal.hasRoles=t.data}),o.roleModal.show=!0,o.roleModal.id=t.id},switchChange:function(t,e){var a=this,o="T";"T"===a.feeds.data[e].enable&&(o="F"),Object(x["e"])(a.feeds.data[e].id,"users",o).then(function(t){a.feeds.data[e].enable=o,a.$Notice.success({title:t.message})}).catch(function(t){a.getTableDataExcute(a.feeds.current_page)})},addBtn:function(){this.addModal.show=!0},addModalHide:function(){this.addModal.show=!1},editModalHide:function(){this.editModal.show=!1},getAllRoleExcute:function(){var t=this;Object(w["e"])().then(function(e){t.roleModal.allRoles=e.data})},handleTransferChange:function(t){this.roleModal.hasRoles=t},renderFormat:function(t){return t.label+"「"+t.description+"」"},giveUserRoleExcute:function(){var t=this;Object(r["h"])(t.roleModal.id,t.roleModal.hasRoles).then(function(e){t.$Notice.success({title:"操作成功",desc:e.message}),t.roleModal.show=!1})},cancelRoleModal:function(){var t=this;t.roleModal.show=!1,t.roleModal.saveLoading=!1},isHasRoleToAccess:function(t){return!!Object(y["e"])(t,this.$store.state.user.access)}}},D=k,$=Object(u["a"])(D,o,n,!1,null,null,null);e["default"]=$.exports},a447:function(t,e,a){},c13c:function(t,e,a){"use strict";var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t._l(t.uploadList,function(e){return a("div",{staticClass:"demo-upload-list"},["finished"===e.status?[a("img",{attrs:{src:e.url}}),a("div",{staticClass:"demo-upload-list-cover"},[a("Icon",{attrs:{type:"ios-trash-outline"},nativeOn:{click:function(a){return t.handleRemove(e)}}})],1)]:[e.showProgress?a("Progress",{attrs:{percent:e.percentage,"hide-info":""}}):t._e()]],2)}),a("Upload",{ref:"upload",staticStyle:{display:"inline-block",width:"58px"},attrs:{"with-credentials":!1,data:t.uploadConfig.data,"show-upload-list":!1,"default-file-list":t.uploadConfig.default_list,"on-success":t.handleSuccess,"on-error":t.handleError,headers:t.uploadConfig.headers,format:t.uploadConfig.format,"max-size":t.uploadConfig.max_size,"on-format-error":t.handleFormatError,"on-exceeded-size":t.handleMaxSize,"before-upload":t.handleBeforeUpload,multiple:t.uploadConfig.multiple,name:t.uploadConfig.file_name,type:"drag",action:t.uploadConfig.upload_url}},[a("div",{staticStyle:{width:"58px",height:"58px","line-height":"58px"}},[a("Icon",{attrs:{type:"ios-camera",size:"20"}})],1)]),a("Divider",{attrs:{orientation:"left"}},[t._v("点击预览图片")]),a("div",{staticClass:"galley-image-list"},[a("ul",{ref:"galley",staticClass:"pictures  row l-hide"},t._l(t.formatFileList,function(t,e){return a("li",{key:e},[a("img",{attrs:{"data-original":t.url,src:t.url,alt:""}})])}),0)])],2)},n=[],i=(a("7364"),a("f763"),a("2934"),a("ea7c")),s=a.n(i),r=(a("4e7f"),{props:{isDelete:{type:Boolean,default:!1},uploadConfig:{type:Object,default:{headers:{Authorization:window.access_token},format:["jpg","jpeg","png","gif"],max_size:800,upload_url:window.uploadUrl.uploadToLocaleUrl+"/tmp",file_name:"file",multiple:!1,file_num:0,data:[],default_list:[{name:"",attachment_id:0,url:""},{name:"",attachment_id:0,url:""}]}}},data:function(){return{imgName:"",visible:!1,uploadList:[],formatFileList:[]}},methods:{handleRemove:function(t){var e=this.$refs.upload.fileList;this.$refs.upload.fileList.splice(e.indexOf(t),1);var a=this.fomatFile();this.$emit("input",a),this.$emit("on-upload-change",this.uploadList,a),this.ViewImage()},handleSuccess:function(t,e){if(!t.hasOwnProperty("status")||"success"!==t.status)return this.$Notice.error({title:"出错了，请删除后重新上传",desc:t.message}),!1;e.url=t.data.url,e.name=t.data.original_name,e.attachment_id=t.data.attachment_id;var a=this.fomatFile();this.$emit("input",a),this.$emit("on-upload-change",this.uploadList,a),this.ViewImage()},handleError:function(t,e){console.log(t),this.$Notice.error({title:"出错了",desc:t})},fomatFile:function(){var t=[];return this.uploadList.forEach(function(e,a,o){t.push({attachment_id:e.attachment_id,url:e.url})}),this.formatFileList=t,1===this.uploadConfig.file_num&&(t=t[0]),t},handleFormatError:function(t){this.$Notice.warning({title:"文件格式不正确",desc:"文件 "+t.name+" 格式不正确。"}),this.ViewImage()},handleMaxSize:function(t){this.$Notice.warning({title:"超出文件大小限制",desc:"文件 "+t.name+" 太大，不能超过 "+this.uploadConfig.max_size+"kb"}),this.ViewImage()},handleBeforeUpload:function(){var t=this.uploadList.length<this.uploadConfig.file_num;return t||(this.$Notice.warning({title:"数量限制",desc:"最多只能上传"+this.uploadConfig.file_num+"个文件"}),this.ViewImage()),t},ViewImage:function(){this.$nextTick(function(){$(function(){$(".l-hide").click(function(){$(".l-show").removeAttr("id").addClass("l-hide").removeClass("l-show"),$(this).attr("id","galley"),$(this).addClass("l-show"),$(this).removeClass("l-hide");var t=document.getElementById("galley"),e=new s.a(t,{url:"data-original",toolbar:{oneToOne:!0,prev:function(){e.prev(!0)},play:!0,next:function(){e.next(!0)},update:function(){},download:function(){var t=document.createElement("a");t.href=e.image.src,t.download=e.image.alt,document.body.appendChild(t),t.click(),document.body.removeChild(t)}}})})})})}},mounted:function(){this.uploadList=this.$refs.upload.fileList;var t=this.fomatFile();"undefined"!==t&&(this.$emit("input",t),this.$emit("on-upload-change",this.uploadList,t)),this.ViewImage()}}),l=r,d=(a("6a8f"),a("6691")),c=Object(d["a"])(l,o,n,!1,null,null,null);e["a"]=c.exports},cc5e:function(t,e,a){"use strict";a.d(e,"h",function(){return n}),a.d(e,"a",function(){return i}),a.d(e,"c",function(){return s}),a.d(e,"f",function(){return r}),a.d(e,"b",function(){return l}),a.d(e,"d",function(){return d}),a.d(e,"g",function(){return c}),a.d(e,"i",function(){return u}),a.d(e,"e",function(){return m});var o=a("66df"),n=function(t){return o["a"].request({url:"/api/admin/roles",params:{search_data:JSON.stringify(t)},method:"get"})},i=function(t){return o["a"].request({url:"/api/admin/roles",data:t,method:"post"})},s=function(t,e){return o["a"].request({url:"/api/admin/roles/"+e,data:t,method:"patch"})},r=function(t){return o["a"].request({url:"/api/admin/roles/"+t,method:"get"})},l=function(t){return o["a"].request({url:"/api/admin/roles/"+t,method:"delete"})},d=function(){return o["a"].request({url:"/api/admin/all_permissions",method:"get"})},c=function(t){return o["a"].request({url:"api/admin/roles/"+t+"/permissions",method:"get"})},u=function(t,e){return o["a"].request({url:"/api/admin/give/"+t+"/permissions",data:{permission:e},method:"post"})},m=function(){return o["a"].request({url:"/api/admin/roles/all_roles",method:"get"})}}}]);